
SCANF(3S)       ДЕМОС. Библиотечные функции        SCANF(3S)


ИИММЯЯ
       ssccaannff, ffssccaannff, ssssccaannff -- ффооррммааттнныыйй ввввоодд..

ФФООРРММААТТ
       #iinncclluuddee <_s_t_d_i_o._h>

       ssccaannff (_f_m_t [,_p_o_i_n_t_e_r] ...)
       cchhaarr *_f_m_t;

       ffssccaannff (_s_t_r_e_a_m, _f_m_t [,_p_o_i_n_t_e_r] ...)
       FFIILLEE *_s_t_r_e_a_m;
       cchhaarr *_f_m_t;

       ssssccaannff (_s, _f_m_t [,_p_o_i_n_t_e_r] ...)
       cchhaarr *_s, *_f_m_t;

       #iinncclluuddee <_v_a_r_a_r_g_s._h>
       __ddoossccaann (_i_o_p, _f_m_t, _a_r_g_p)
       FFIILLEE *_i_o_p;
       cchhaarr *_f_m_t;
       vvaa__lliisstt *_a_r_g_p;

ООППИИССААННИИЕЕ
       Функция ssccaannff считывает данные из стандартного  файла
       ввода  ssttddiinn.   Функция  ffssccaannff  считывает  данные из
       файла, связанного с потоком данных  _s_t_r_e_a_m.   Функция
       ssssccaannff  в  качестве  источника данных использует сим-
       вольную строку _s.  Каждая из функций преобразует вво-
       димые символы в соответствии с форматом _f_m_t и записы-
       вает результаты  в  переменные,  указанные  в  списке
       _p_o_i_n_t_e_r.

       Каждая из этих функций  вызывает  __ddoossccaann,  используя
       vvaarraarrggss(3s)  для  передачи переменного числа парамет-
       ров.

       Управляющая строка _f_m_t обычно  содержит  спецификации
       преобразований,   которые  необходимо  выполнять  при
       обработке вводимой последовательности символов:

       - Пробелы, символы табуляции и новой строки,  которые
         соответствуют пустым позициям при вводе;

       - Обычные символы, за исключением "%", которые должны
         совпадать  со следующими по порядку символами вход-
         ного потока;

       - Спецификации преобразования, состоящие  из  символа
         "%",  необязательного символа подавления присваива-
         ния (символ "*"), необязательного числа (максималь-
         ная  ширина поля) и односимвольного кода преобразо-
         вания.

       Спецификация преобразования управляет обработкой оче-
       редного  вводимого поля, результат помещается в пере-
       менную, на которую указывает соответствующий аргумент
       (за  исключением  тех  случаев,  когда  указан символ
       подавления   присваивания   "*").    Вводимое    поле


                            -1-                     ДЕМОС/PV


SCANF(3S)       ДЕМОС. Библиотечные функции        SCANF(3S)


       определяется как строка символов, отличных от символа
       пробел.  Строка считывается  вплоть  до  запрещенного
       символа или до исчерпания указанной ширины поля.

       Код  преобразования  указывает  способ  интерпретации
       вводного   поля;   соответствующий  аргумент  _p_o_i_n_t_e_r
       обычно должен иметь строго  определенный  тип.  Могут
       применяться следующие коды преобразований:

       %% -  в этой точке ввода  ожидается  одиночный  символ
            "%"; присваивание не выполняется;

       dd -  ожидается десятичное целое число  (соответствую-
            щий аргумент должен быть указателем на целое);

       oo -  ожидается восьмеричное целое число (соответству-
            ющий аргумент должен быть указателем на целое);

       xx -  ожидается шестнадцатиричное целое (соответствую-
            щий аргумент должен быть указателем на целое);

       ss -  ожидается  символьная  строка   (соответствующий
            аргумент должен быть указателем на массив симво-
            лов, размер которого  является  достаточным  для
            того, чтобы вместить строку и завершающий символ
            "\0").  Вводное поле  завершается  пробелом  или
            символом новой строки;

       cc -  ожидается символ (соответствующий аргумент  дол-
            жен  быть  символьным указателем). В этом режиме
            подавляется обычный пропуск пробелов (для  того,
            чтобы   прочитать   следующий   непробел,  можно
            использовать "%%11ss"). Если задается ширина  поля,
            соответствующий  аргумент  должен  указывать  на
            символьный  массив,  куда  будет   производиться
            запись указанного числа символов;

       ee или

       ff -  ожидается число с  плавающей  точкой;  следующее
            поле соответствующим образом преобразовывается и
            присваивается переменной (в  качестве  аргумента
            должен быть задан указатель на число с плавающей
            точкой (ffllooaatt)). Формат для  чисел  с  плавающей
            точкой   содержит  необязательный  знак,  строку
            цифр,  возможно,  содержащую  десятичную  точку,
            необязательное  поле экспоненты, содержащее сим-
            вол "e" (или  "E"),  за  которым  следует  целое
            число с необязательным знаком;

       [[ -  указывает на строку,  не  ограничиваемую  пробе-
            лами.   За левой квадратной скобкой записывается
            набор символов и правая квадратная скобка.  Если
            перед  набором символов нет знака "~~", переписы-
            ваются все символы исходной  строки  до  первого
            символа, не входящего в набор.  Если перед набо-
            ром символом указан знак "~~",  символы  вводятся
            до   появления   первого   символа   из  набора.


                            -2-                     ДЕМОС/PV


SCANF(3S)       ДЕМОС. Библиотечные функции        SCANF(3S)


            Соответствующий аргумент должен быть ссылкой  на
            символьный массив.

       Если перед "dd", "oo" или "xx" ставится "ll",  это  озна-
       чает,  что в списке аргументов находится указатель на
       целое число с двойной точностью (lloonngg, а не на  iinntt).
       Аналогично,  если  перед  "ee" и "ff" ставится "ll", это
       означает, что используется указатель на число с  пла-
       вающей  точкой двойной точности (ddoouubbllee, а не ffllooaatt).
       Если символам преобразования "dd", "oo" или  "xx"  пред-
       шествует  символ  "hh", то это означает, что использу-
       ется указатель на короткое целое число (sshhoorrtt,  а  не
       на iinntt).

       Функции возвращают число успешно найденных и  присво-
       енных  элементов  ввода.  При  достижении конца файла
       возвращается значение EEOOFF  (константа  EEOOFF  не  равна
       нулю).  Если преобразование не состоялось из-за нали-
       чия в исходной строке неподходящего символа,  возвра-
       щается значение 0.

ППРРИИММЕЕРРЫЫ
       В результате обработки функцией scanf:

       iinntt _i; ffllooaatt _x; cchhaarr _n_a_m_e[50];
       ssccaannff("%%dd%%ff%%ss", &_i, &_x, _n_a_m_e);

       следующей вводной строки

       25 54.32е-1 Сизов

       в переменную _i будет занесено значение 25, в _x значе-
       ние 5.432 и в _n_a_m_e будет записана строка "Сизов\0".

       При обработке функцией

       iinntt _i; ffllooaatt _x; cchhaarr _n_a_m_e[50];
       ssccaannff("%_2_d%_f%*_d%[1234567890]",&_i,&_x,_n_a_m_e);

       строки

       56789 0123 56а72

       переменной _i будет присвоено 56, _x будет равен 789.0,
       "0123" будет пропущено и _n_a_m_e будет содержать "56\0".
       При следующем обращении  к  ggeettcchhaarr  будет  возвращен
       символ "a".

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _a_t_o_f(3), _g_e_t_c(3s), _p_r_i_n_t_f(3s), _v_a_r_a_r_g_s(3s)

ДДИИААГГННООССТТИИККАА
       При достижении конца ввода функция  ssccaannff  возвращают
       EEOOFF (конец файла).

ЗЗААММЕЕЧЧААННИИЯЯ
       Достаточно просто написать вызов функции ssccaannff, пони-
       мание   которого   может   потребовать   значительных


                            -3-                     ДЕМОС/PV


SCANF(3S)       ДЕМОС. Библиотечные функции        SCANF(3S)


       интеллектуальных усилий.



























































                            -4-                     ДЕМОС/PV

