
F77(1)                 ДЕМОС. Команды                 F77(1)


ИИММЯЯ
       ff7777 - компилятор с языка Фортран-77.

ФФООРРММААТТ
       ff7777 [_к_л_ю_ч...] _ф_а_й_л...

ООППИИССААННИИЕЕ
       Команда ff7777 представляет  собой  компилятор  с  языка
       Фортран-77.  Распознаются параметры следующих типов:

       -  Параметры, имена которых  заканчиваются  на  `._f',
          считаются    исходными    программами   на   языке
          Фортран-77; они компилируются, и каждая  объектная
          программа  помещается в файл текущего каталога под
          именем,  которое  получается  из  имени  исходного
          файла путем замены суффикса `._f' на `._o';

       -  Параметры, имена которых заканчиваются на `._r' или
          `._e',  считаются  исходными  программами на языках
          RATFOR или EFL соответственно; они сперва преобра-
          зуются  соответствующим  препроцессором,  а  затем
          компилируются с помощью ff7777;

       -  Аналогично, параметры, имена которых заканчиваются
          на  `._c' или `._s', считаются исходными программами
          на языке Си или ассемблере; они компилируются  или
          ассемблируются, создавая файлы `._o'.

       Приведенные ниже ключи имеют то  же  самое  значение,
       что  и  в  команде  cccc(1).  Описание ключей, задающих
       режимы загрузки содержится в lldd(1):

       --cc  Подавляет загрузку и создает файл `._o'  для  каж-
           дого исходного файла.

       --dd  Компилятор  формирует  дополнительные  команды  и
           информацию  в  объектном  файле  для  символьного
           отладчика ccddeebb.

       --pp  Подготовить объектные  файлы  для  профилирования
           (см. команду _p_r_o_f(1)).

       --OO  Вызвать оптимизатор объектного кода.

       --SS  Скомпилировать  указанные  программы  и  оставить
           ассемблерный  выход  в  соответствующих  файлах с
           суффиксами `._s' (файлы `._o' не создаются).

       --ff  Использовать интерпретатор плавающей запятой  (на
           машинах  СМ-4  и  Электроника-125),  кроме  того,
           подключается вариант компилятора,  который  может
           работать  на  машинах  без  процессора  плавающей
           запятой.

       --oo вывод
           Присваивает выходному файлу редактора  связей  lldd
           имя "вывод" вместо _a._o_u_t.



                            -1-                      ДЕМОС/P


F77(1)                 ДЕМОС. Команды                 F77(1)


       --VV, --ZZ, --LL, --QQ
           Указания о сегментации при сборке в режиме  овер-
           лея.  Пример явного указания распределения:

           ff7777 --nn --oo _p_o_k_e_r --ZZ _p_o_k_e_r._o --ZZ _o_r_e_g_o_n._o

           При этом все библиотеки Фортрана всегда  попадают
           в  базовый  сегмент команд.  Пример  автоматичес-
           кого распределения:

           ff7777 --nn --oo _p_o_k_e_r --QQ _p_o_k_e_r._o _o_r_e_g_o_n._o

           Если применяется ключ --QQ, имеется следующее  сог-
           лашение  о размещении библиотек фортрана: если --QQ
           указан последним в списке, все фортрановские биб-
           лиотеки  распределяются по оверлеям, если послед-
           ним указан ключ  --LL,  то  библиотеки  попадают  в
           базовый сегмент команд.  Ключ --QQ так же, как ключ
           --LL, может встречаться несколько раз.  Чтобы полу-
           чить подробную информацию о работе редактора свя-
           зей lldd в режиме автоматического распределения  по
           оверлеям  (с  ключем  --QQ),  следует  указать  при
           вызове ключ --VV (подробнее см. описание  редактора
           связей _l_d(1)).

       Следующие ключи являются специфическими для ff7777:

       --oonneettrriipp
             Компилирует циклы ddoo, которые, получив управле-
             ние,  выполняются  по крайней мере один раз. (В
             Фортране-77 циклы  ddoo  вообще  не  выполняются,
             если верхняя граница меньше, чем нижняя).

       --uu    Устанавливает  тип  неопределенных   переменных
             "uunnddeeffiinneedd"  вместо  использования  стандартных
             правил языка Фортран.

       --CC    Генерирует код для контроля индексов  на  выход
             за объявленные границы массива.

       --ww    Подавляет все предупредительные сообщения. Если
             этот  ключ  имеет  вид --ww6666, подавляются только
             предупредительные сообщения  относительно  сов-
             местимости   с  языком  Фортран-66.  Ключ  --wwkkii
             подавляет предупредительные сообщения о русских
             буквах в идентификаторах.

       --UU    По умолчанию прописные буквы в  идентификаторах
             и  в  ключевых  словах  переводятся в строчные.
             Ключ --UU блокирует перевод, что позволяет разли-
             чать прописные и строчные буквы в идентификато-
             рах. Ключевые слова в этом случае  записываются
             прописными буквами.

       --OO_Ц_и_ф_р_а
             Разрешить  вынесение   переменных   циклов   на
             регистры  с  целью  оптимизации.   Одновременно
             включается режим  --OO.  _Ц_и_ф_р_а  определяет  число


                            -2-                      ДЕМОС/P


F77(1)                 ДЕМОС. Команды                 F77(1)


             регистров: 1 или 2.

       --II22 --II44 --IIss
             Ключи влияют на размер целых переменных: ключ --
             --II22  устанавливает  тип "iinntteeggeerr" эквивалентным
             "iinntteeggeerr**22", --II44 - "iinntteeggeerr**44".   По  умолчанию
             установлен  режим  --II44 (в соответствии со стан-
             дартом  переменные  типов  "iinntteeggeerr"  и  "rreeaall"
             должны  занимать одинаковую память).  Режим --IIss
             разрешает компилятору в  режиме  --II44  вычислять
             индексы  в  предположении,  что они находятся в
             диапазоне чисел типа "iinntteeggeerr**22".

       --vv    В этом режиме компилятор сообщает о начале оче-
             редных  этапов  трансляции (F77PASS, PASS1, AS,
             LD, C),  а  также  выдает  версию  компилятора.
             Этот  ключ передается также вызываемым компиля-
             тором командам cccc и lldd.

       --TT_С_и_м_в_о_л_И_м_я__к_о_м_п_о_н_е_н_т_ы
             Заменить какой-то проход компилятора на указан-
             ную  программу.  Служит для отладки компилятора
             или вызова других его версий. _С_и_м_в_о_л обозначает
             следующие компоненты транслятора:

             00  - ff7777 проход 0;
             11  - ff7777 проход 1;
             22  - cc11 (Си-компилятор, проход 1);
             oo  - cc22 (оптимизатор кода);
             aa  - aass (ассемблер);
             ll  - lldd (редактор связей);
             ff  - стартовая процедура (вместо /_l_i_b/_c_r_t_0._o);
             mm  - макропроцессор mm44.

             Следует иметь ввиду, что ключ --ff  переназначает
             компоненты "11" и "ff".

       --FF    Обработать соответствующие  файлы  препроцессо-
             рами rraattffoorr и eeffll, поместить результат в файл с
             суффиксом ._f, но не компилировать результат.

       --mm    Применить к каждому файлу ._r или ._e  препроцес-
             сор  mm44  перед  обработкой  его препроцессорами
             rraattffoorr и eeffll.

       --ee_x   Использовать строку "_x" как ключ  для  eeffll  при
             обработке файлов ._e.

       --rr_x   При обработке файлов с суффиксом  ._r  использо-
             вать строку "_x" как ключ для препроцессора rraatt--
             ffoorr.

       Прочие параметры считаются либо  ключами  загрузчика,
       либо объектными программами, совместимыми с ff7777, либо
       библиотеками  программ.   Эти  программы,  вместе   с
       результатами  указанных  компиляций,  загружаются  (в
       заданном порядке) для получения выполняемой программы
       с именем _a._o_u_t.


                            -3-                      ДЕМОС/P


F77(1)                 ДЕМОС. Команды                 F77(1)


       Компилятор реализует полный Фортран-77  с  некоторыми
       расширениями,  сделанными  как для более эффективного
       использования ЭВМ, так и для лучшей  совместимости  с
       другими диалектами Фортрана.

       Язык расширен по сравнению с  Фортраном-77  следующим
       образом:

       -  Введены новые описатели размещения локальных пере-
          менных:  "ssttaattiicc",  "aauuttoommaattiicc",  "uunnddeeffiinneedd" (для
          оператора "iimmpplliicciitt").

       -  В качестве ограничителя строк  можно  использовать
          как  одиночные,  так  и  двойные кавычки; при этом
          закрывающая кавычка должна быть такой  же,  как  и
          открывающая.

       -  В строках можно использовать обозначения управляю-
          щих символов, принятые в языке Си: \\nn, \\tt, \\bb, \\ff,
          \\oo, \\"", \\'', \x.

       -  Введен оператор вставки текста

          iinncclluuddee ''_и_м_я-_ф_а_й_л_а''

       -  Введены битовые, восьмеричные и  шестнадцатиричные
          константы, например:

          bb'001'  - битовые;
          oo'725'  - восьмеричные;
          xx'af5'  - шестнадцатиричные.

       -  Введены операторы "aacccceepptt" - эквивалентно  "rreeaadd",
          "ttyyppee"  -  эквивалентно  "pprriinntt", "bbyyttee" - эквива-
          лентно "cchhaarraacctteerr", для совместимости с некоторыми
          диалектами языка Фортран-4.

       -  Введены операции "oorr", "aanndd", "xxoorr"  и  "nnoott"  для
          работы   с  целыми  числами,  функции  "ggeettaarrgg"  и
          "iiaarrggcc" для связи с системой.

       -  По умолчанию каналы ввода/вывода настроены следую-
          щим образом:

          00  - ssttddeerrrr  (канал диагностик);
          55  - ssttddiinn   (стандартный ввод);
          66  - ssttddoouutt  (стандартный вывод).

          Остальные каналы по умолчанию  связаны  с  файлами
          _f_o_r_t._n,  где  _n  -  номер канала.  Могут использо-
          ваться каналы с номерами 0-9.  При открытии после-
          довательные  файлы по умолчанию устанавливаются на
          начало (в отличие от  Фортрана-77  в  Демосе 1.3).
          Для работы по-старому (открытые файлы устанавлива-






                            -4-                      ДЕМОС/P


F77(1)                 ДЕМОС. Команды                 F77(1)


          ются на конец) нужно описать в программе:

          ccoommmmoonn /ooppnneeooff/ _i_o_p_e_n_е
          iinntteeggeerr**44 _i_o_p_e_n_e
           ...
          _i_o_p_e_n_e = 1

       Существует два формата входного текста. Если в колон-
       ках  1-6 стоит символ табуляции, или в качестве приз-
       нака продолжения используется `&' в  первой  позиции,
       длина  входной  строки может быть произвольной. Иначе
       используются только первые 72 символа входной строки.
       Символ `!' является признаком внутристрочного коммен-
       тария, текст между `!' и концом строки  пропускается.
       Однако,  `!'  не  может  быть единственным символом в
       строке.

       Программы на Фортране-77  могут  использоваться  сов-
       местно  с  программами  на  Си.  Оператор Фортрана-77
       ccaallll _x(_a,_b,_c)  эквивалентен  (если  _a,_b,_c  -  простые
       переменные) оператору языка Си: _x_(&_a,&_b,&_c), то есть
       внешние имена дополняются  символом  подчеркивания  в
       конце,  а параметры передаются по адресу (если это не
       символьные  переменные  и  не  функции).    Подробнее
       смотри описание языка Фортран-77 для ОС ДЕМОС.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _p_r_o_f(1), _c_c(1), _l_d(1), _a_d_b(1), _c_d_e_b(1)

       Имеется отдельное описание языка  FF7777  и  компилятора
       ff7777.

ДДИИААГГННООССТТИИККАА
       Диагностические сообщения, выдаваемые непосредственно
       компилятором  ff7777, не требуют пояснений. Иногда могут
       выдаваться сообщения загрузчика.  Некоторые сообщения
       об  ошибке  компилятора  могут  вызываться ошибками в
       программах, или превышением количественных  ограниче-
       ний.

ФФААЙЙЛЛЫЫ
       /_u_s_r/_l_i_b/_f_7_7/_f_7_7_p_a_s_s_0  проход 0
       /_u_s_r/_l_i_b/_f_7_7/_f_7_7_p_1     проход 1
       /_u_s_r/_l_i_b/_f_7_7/_f_7_7_p_1_f    проход 1 для машин без процес-
                              сора плавающей точки
       /_u_s_r/_l_i_b/_f_7_7/_l_i_b_F_7_7._a  библиотека встроенных  функций
                              Фортрана-77
       /_u_s_r/_l_i_b/_f_7_7/_l_i_b_I_7_7._a  библиотека        ввода/вывода
                              Фортрана-77
       /_t_m_p/_f???.?            рабочие файлы

ЗЗААММЕЕЧЧААННИИЯЯ
       При работе на ЭВМ типа СМ-4 (с малым объемом адресуе-
       мой памяти) существуют ограничения на допустимый раз-
       мер программы.

       Отсутствие в ЭВМ команд плавающей  арифметики  (СМ-4)
       не    является    препятствием    для   использования


                            -5-                      ДЕМОС/P


F77(1)                 ДЕМОС. Команды                 F77(1)


       компилятора, но не  следует  удивляться,  если  время
       работы  программы резко возрастет (как и в программах
       на Си).

       Большие  программы  (содержащие  большое   количество
       меток)  могут  не пройти через оптимизатор объектного
       кода (предупредительное сообщение "optimizer  out  of
       space").  Система ввода/вывода языка Фортран довольно
       велика и занимает около 050000(8) байтов  оперативной
       памяти.   Для уменьшения размера программ и ускорения
       их работы рекомендуется использовать ключи  "--OO11 --II22"
       всегда,  когда  это  возможно.   Если программа имеет
       достаточно большой размер, систему ввода-вывода можно
       перенести в оверлейные сегменты (см.  _l_d(1)).

       Для отладки программ на Фортране могут использоваться
       те  же  средства, что и для программ на Си: отладчики
       aaddbb и ccddeebb. Отладчик ccddeebb понимает типы переменных  в
       Фортране-77.









































                            -6-                      ДЕМОС/P

