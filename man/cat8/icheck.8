
ICHECK(8)       ДЕМОС. Сопровождение системы       ICHECK(8)


ИИММЯЯ
        iicchheecckk - проверка правильности файловой системы.

ФФООРРММААТТ
        iicchheecckk [--ss] [--bb _н_о_м_е_р_а] _ф_а_й_л_о_в_а_я-_с_и_с_т_е_м_а

ООППИИССААННИИЕЕ
        Команда iicchheecckk исследует  файловую  систему,  строит
        битовую карту использованных блоков и сравнивает эту
        битовую карту со списком свободных  блоков,  который
        поддерживается данной _ф_а_й_л_о_в_о_й _с_и_с_т_е_м_о_й.  Нормальный
        вывод команды iicchheecckk включает сообщения,  в  которых
        указывается:

        - Общее число файлов и число обычных файлов, катало-
          гов, специальных блочных и символьных файлов;

        - Общее число используемых  блоков  и  число  блоков
          одинарной,  двойной и тройной косвенной адресации,
          а также блоков каталогов;

        - Количество свободных блоков;

        - Количество "потерянных" блоков, т.е. таких блоков,
          которые  не  содержатся ни в одном из файлов, ни в
          списке свободных блоков.

        Ключ --ss приводит к тому, что команда iicchheecckk  игнори-
        рует  фактический  список  свободных блоков и строит
        новый  посредством  перезаписи  суперблока  файловой
        системы.  В процессе выполнения этой операции файло-
        вая система должна  быть  размонтирована;  если  это
        невозможно  (например, должна быть исправлена корне-
        вая файловая система), следует позаботиться  о  том,
        чтобы  данная система была бездействующей и сразу же
        после этого перезагрузить ее, чтобы не  продолжалась
        работа  со  старой,  неверной  копией  суперблока  в
        памяти. Обратите также внимание  на  то,  что  слова
        суперблока,   которые  указывают  размер  свободного
        списка и I-списка,  считаются  правильными,  и  если
        суперблок  был  изменен, эти слова также потребуется
        скорректировать. Ключ --ss подавляет обычные  выходные
        сообщения.

        После ключа --bb располагается список  номеров  [логи-
        ческих]  блоков  (по  1K)  (в списке - не более 10 в
        данной версии); когда какой-либо из указанных блоков
        обнаруживается  в  файле,  выдается  диагностическое
        сообщение.

        Команда iicchheecckk работает быстрее,  если  используется
        небуферизированный обмен со специальным файлом, пос-
        кольку в этом случае сразу считывается столько  бло-
        ков, сколько содержится в I-списке.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
        _f_s_c_k(8), _n_c_h_e_c_k(8), _f_i_l_s_y_s(5), _c_l_r_i(8)



                            -1-                     ДЕМОС/PV


ICHECK(8)       ДЕМОС. Сопровождение системы       ICHECK(8)


ДДИИААГГННООССТТИИККАА
        Для дублированных и неверных блоков  (которые  нахо-
        дятся  вне файловой системы) команда iicchheecckk сообщает
        об ошибке, а также указывает  I-номер  и  тип  соот-
        ветствующего  блока.  Если происходит ошибка чтения,
        печатается номер плохого блока и команда iicchheecckk счи-
        тает, что он содержит 0.

        "_b_a_d _f_r_e_e_b_l_o_c_k" ("_п_л_о_х_о_й _с_в_о_б_о_д_н_ы_й _б_л_о_к")  означает,
        что  в  свободном  списке встретился номер блока вне
        доступного пространства.

        "nn _d_u_p_s _i_n _f_r_e_e" ("nn _д_у_б_л_е_й _в _с_п_и_с_к_е _с_в_о_б_о_д_н_ы_х  _б_л_о_-
        _к_о_в")  означает, что в списке свободных было обнару-
        жено nn блоков,  которые  дублируют  блоки  какого-то
        файла, либо предыдущей части свободного списка.

ЗЗААММЕЕЧЧААННИИЯЯ
        Поскольку команда iicchheecckk по своей  природе  является
        двухпроходной, при работе с активной файловой систе-
        мой могут  выдаваться  неадекватные  диагностические
        сообщения.

        Данная команда практически не используется, в  теку-
        щей  версии  контроль  и  коррекция файловой системы
        выполняется командой _f_s_c_k(8).


































                            -2-                     ДЕМОС/PV

