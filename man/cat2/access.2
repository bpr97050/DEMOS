
ACCESS(2)         ДЕМОС. Системные вызовы          ACCESS(2)


ИИММЯЯ
       aacccceessss - определение доступности файла.

ФФООРРММААТТ
       #iinncclluuddee <_s_y_s/_f_i_l_e._h>

       _a_c_c_e_s_s_i_b_l_e = aacccceessss(_n_a_m_e, _m_o_d_e)
       iinntt   _a_c_c_e_s_s_i_b_l_e;
       cchhaarr **_n_a_m_e;
       iinntt   _m_o_d_e;

ООППИИССААННИИЕЕ
       Системный вызов aacccceessss проверяет режим доступа  файла
       _n_a_m_e   в  соответствии  с  запросом  _m_o_d_e.   В  файле
       /_u_s_r/_i_n_c_l_u_d_e/_s_y_s/_f_i_l_e._h определены следущие типы зап-
       росов:

       #ddeeffiinnee RR__OOKK 4 /* доступен для чтения */
       #ddeeffiinnee WW__OOKK 2 /* доступен для записи */
       #ddeeffiinnee XX__OOKK 1 /* доступен для выполнения */
       #ddeeffiinnee FF__OOKK 0 /* проверка существования */

       Параметр _m_o_d_e представляет собой  битовую  комбинацию
       признаков XX__OOKK, WW__OOKK и RR__OOKK.  Специальный запрос FF__OOKK
       служит для определения существования  файла.  В  этом
       случае  проверяется существование и возможность прос-
       мотра всех каталогов, входящих в имя файла.

       Для определения прав  доступа  к  файлу  используются
       реальные  идентификаторы  пользователя (_U_I_D) и группы
       (_G_I_D)  данного  процесса,  поэтому  системный   вызов
       aacccceessss  может  применяться в программах, работающих в
       режиме _s_e_t-_U_I_D (_s_e_t-_G_I_D).

       Следует отметить, что проверяется только  режим  дос-
       тупа  файла,  а  не его тип. Так, в результате работы
       aacccceessss  каталог  может  быть  объявлен  доступным  на
       запись, но попытка открыть его на запись всегда будет
       неудачной. Файлы могут выглядеть  "выполняемыми",  но
       их  невозможно  будет  запустить с помощью системного
       вызова _e_x_e_c_v_e(2), если они не будут иметь  соответст-
       вующий формат.

ЗЗННААЧЧЕЕННИИЕЕ
       Если указанный файл не существует или его режим  дос-
       тупа  не соответствует запросу, возвращается значение
       -1, в остальных случаях - 0.

ККООДДЫЫ ООШШИИББООКК
       После неудачного завершения системного вызова  aacccceessss
       переменная eerrrrnnoo может принимать следующие значения:

       [[EENNOOTTDDIIRR]]   Указанное имя содержит компоненту,  кото-
                   рая  не является каталогом или не сущест-
                   вует.

       [[EENNOOEENNTT]]    Задано слишком  длинное  или  пустое  имя
                   файла.   Указанный  файл  не  существует.


                            -1-                     ДЕМОС/PV


ACCESS(2)         ДЕМОС. Системные вызовы          ACCESS(2)


                   Какой-либо из каталогов, входящих  в  имя
                   файла, недоступен для просмотра.

       [[EELLOOOOPP]]     Число косвенных ссылок в указанном  имени
                   превышает  максимально  допустимое значе-
                   ние.

       [[EERROOFFSS]]     Проверялась  возможность  записи   файла,
                   находящего  в  файловой  системе, которая
                   смонтирована только для чтения.

       [[EETTXXTTBBSSYY]]   Проверялась  возможность  записи   файла,
                   содержащего  загрузочный модуль реентера-
                   бельной программы (разделяемый  текстовый
                   сегмент),   которая  в  настоящей  момент
                   выполняется.

       [[EEAACCCCEESS]]    Режим доступа указанного файла  не  соот-
                   ветствует запросу.

       [[EEFFAAUULLTT]]    Адреса аргументов системного вызова выхо-
                   дят  за границы памяти, доступной данному
                   процессу.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _c_h_m_o_d(2), _s_t_a_t(2)


































                            -2-                     ДЕМОС/PV

