
EXECVE(2)         ДЕМОС. Системные вызовы          EXECVE(2)


ИИММЯЯ
       eexxeeccvvee, eexxeeccllee - выполнить файл.

ФФООРРММААТТ
       eexxeeccvvee( _n_a_m_e, _a_r_g_v, _e_n_v_p)
       cchhaarr *_n_a_m_e, *_a_r_g_v[], *_e_n_v_p[]

       eexxeeccllee( _n_a_m_e, _a_r_g_0, _a_r_g_1,...,0, _e_n_v_p )
       cchhaarr *_n_a_m_e, *_a_r_g_0, *_a_r_g_1,..., *_e_n_v_p[]

ООППИИССААННИИЕЕ
       Системный вызов  eexxeeccee  заменяет  программу  текущего
       процесса.  Новая программа загружается из файла _n_a_m_e,
       который  либо  является  исполняемым,  либо  содержит
       интерпретируемую  программу.  Исполняемый файл должен
       соответствовать формату, описанному в _a._o_u_t(5).

       Интерпретируемая программа должна начинаться  строкой
       вида:

              ##!! _и_м_я__и_н_т_е_р_п_р_е_т_а_т_о_р_а

       В этом случае вызывается  указанный  интерпретатор  с
       именем  _n_a_m_e  в  качестве  первого  параметра. Смотри
       также разъяснения ниже.

       Значения  передаваемых  параметров  в  вызове  eexxeeccvvee
       содержатся  в массиве _a_r_g_v в виде текстовых строк. По
       соглашению программе должен передаваться хотя бы один
       параметр  -  имя  этой  программы.  Обычно в качестве
       имени программы используется базовое имя файла _n_a_m_e.

       В вызове eexxeeccllee аргументы указываются в  виде  списка
       строк  _a_r_g_0, _a_r_g_1, ... , заканчивающиеся нулевым ука-
       зателем. Эти аргументы соответствуют _a_r_g_v[0], _a_r_g_v[1]
       ...  вызова  eexxeeccvvee,  т.е.  eexxeeccllee и eexxeeccvvee - это две
       формы одного системного вызова eexxeeccee.

       Массив _e_n_v_p  содержит  имена  и  значения  переменных
       среды процесса (см.  _e_n_v_i_r_o_n(7)).

       Новая программа наследует все открытые файлы, за иск-
       лючением  тех,  для  которых установлен режим FFIIOOCCLLEEXX
       (см.  _i_o_c_t_l(2)).

       Все сигналы,  которые  игнорировались  до  выполнения
       eexxeeccvvee,  будут  игнорироваться  и  после.  Однако все
       установленные реакции на сигналы заменяются на  стан-
       дартные (см.  _s_i_g_n_a_l(2)).

       Каждый процесс имеет реальные и эффективные идентифи-
       каторы  пользователя  и группы.  Реальные идентифика-
       торы  соответствуют   идентификаторам   пользователя,
       который  запустил данный процесс, а эффективные опре-
       деляют права доступа  процесса.   Если  статус  файла
       _n_a_m_e  содержит  признак  sseett--UUIIDD,  то  при выполнении
       новой программы изменяются  права  доступа  процесса,
       т.е.  эффективные  идентификаторы процесса заменяются


                            -1-                     ДЕМОС/PV


EXECVE(2)         ДЕМОС. Системные вызовы          EXECVE(2)


       на значение  идентификаторов  владельца  файла  _n_a_m_e.
       Все остальные атрибуты процесса:

       реальный идентификатор пользователя (см. _g_e_t_u_i_d(2))
       идентификатор процесса              (см. _g_e_t_p_i_d(2))
       идентификатор порождающего процесса (см. _g_e_t_p_p_i_d(2))
       идентификатор группы процессов      (см. _g_e_t_p_g_r_p(2))
       рабочий каталог                  (см. _c_h_d_i_r(2))
       корневой каталог                 (см. _c_h_d_i_r(2))
       управляющий терминал                (см. _t_t_y(4))
       маска режима доступа                (см. _u_m_a_s_k(2))

       остаются неизменными.

       Когда программа начинает выполняться, она  вызывается
       следующим образом:

              mmaaiinn(_a_r_g_c, _a_r_g_v, _e_n_v_p)
              iinntt _a_r_g_c;
              cchhaarr **_a_r_g_v, **_e_n_v_p;

       где _a_r_g_c - количество аргументов в  массиве  _a_r_g_v,  а
       _a_r_g_v - массив указателей на сами аргументы.

ЗЗННААЧЧЕЕННИИЕЕ
       Возврат из системного вызова eexxeeccvvee  всегда  означает
       ошибку.   При  этом  возвращается  значение  -1 и код
       ошибки в переменной eerrrrnnoo.

УУККААЗЗААННИИЕЕ ИИННТТЕЕРРППРРЕЕТТААТТООРРАА
       Интерпретируемая программа, находящаяся в файле _n_a_m_e,
       может начинаться конструкцией

              ##!!программа [_к_л_ю_ч_1 .....]

       Тогда на самом деле будет запущена программа

              программа _к_л_ю_ч_1 ..... _n_a_m_e _a_r_g_1 _a_r_g_2 ...

       Один из ключей указания  интерпретатора  может  иметь
       вид $$**.  В таком случае, если в файле написано

              ##!!программа _к_л_ю_ч_1 $$** _к_л_ю_ч_2 .....

       то будет запущена программа

              программа _к_л_ю_ч_1 _n_a_m_e _a_r_g_1 ... _к_л_ю_ч_2 .....

       то есть вместо $$** подставляется имя файла и аргументы
       _a_r_g_v.   В  первом же случае они подставляются в конец
       команды.

       Для программ на "Си" существует такая форма  указания
       интерпретатора:

       /*#!командная строка
       */



                            -2-                     ДЕМОС/PV


EXECVE(2)         ДЕМОС. Системные вызовы          EXECVE(2)


ККООДДЫЫ ООШШИИББООКК
       Переменная eerrrrnnoo может принимать следующие значения:

       [EENNOOEENNTT]    Каталог, входящий в имя файла, не сущест-
                   вует.

       [EENNOOTTDDIIRR]   Имя файла содержит компоненту, которая не
                   является каталогом.

       [EEAACCCCEESS]    Каталог, входящий в имя файла, закрыт для
                   просмотра.

       [EEAACCCCEESS]    Указанное имя является  именем  специаль-
                   ного файла.

       [EEAACCCCEESS]    Данный процесс не имеет  право  выполнять
                   указанный файл.

       [EENNOOEEXXEECC]   Указанный файл не соответствует формату.

       [EETTXXTTBBSSYY]   Указанный файл в данный момент  записыва-
                   ется другим процессом.

       [EENNOOMMEEMM]    Объем новой программы превышает  установ-
                   ленный предел.

       [EE22BBIIGG]     Слишком длинный список параметров.

       [EEFFAAUULLTT]    Указанный файл имеет  корректный  заголо-
                   вок, но неверный размер.

       [EEFFAAUULLTT]    Адрес параметра вызова не входит в адрес-
                   ное пространство процесса.

       [EELLOOOOPP]     Цепочка указаний интерпретаторов  слишком
                   длинная.

ЗЗААММЕЕЧЧААННИИЯЯ
       Если данный процесс выполняется  в  привилегированном
       режиме,  то  его  полномочия не изменяются, даже если
       статус файла содержит признак sseett--UUIIDD (sseett--GGIIDD).

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _e_x_i_t(2), _f_o_r_k(2), _v_f_o_r_k(2), _e_x_e_c_l(3), _e_n_v_i_r_o_n(7).
















                            -3-                     ДЕМОС/PV

