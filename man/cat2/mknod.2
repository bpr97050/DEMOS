
MKNOD(2)          ДЕМОС. Системные вызовы           MKNOD(2)


ИИММЯЯ
       mmkknnoodd - создание специального файла.

ФФООРРММААТТ
       mmkknnoodd(_n_a_m_e, _m_o_d_e, _d_e_v)
       cchhaarr *_n_a_m_e;
       iinntt _m_o_d_e, _d_e_v;

ООППИИССААННИИЕЕ
       Системный вызов mmkknnoodd создает специальный файл с име-
       нем  _n_a_m_e.  Параметр _m_o_d_e определяет статус создавае-
       мого файла. Часть статуса файла, относящаяся к режиму
       доступа,   модифицируется  в  соответствии  с  маской
       режима доступа процесса (см.  _u_m_a_s_k(2)).

       Если статус файла _m_o_d_e содержит признак блок или бай-
       тоориентированного  специального  файла, параметр _d_e_v
       задает код (_m_a_j_o_r и _m_i_n_o_r) устройства.

       Данный системный вызов допустим только  в  процессах,
       работающих  в привилегированном режиме, кроме случаев
       создания FFIIFFOO файлов.

ЗЗННААЧЧЕЕННИИЕЕ
       В случае успешного завершения системный  вызов  mmkknnoodd
       возвращает  значение  0,  иначе  -  значение -1 и код
       ошибки в переменной eerrrrnnoo.

ККООДДЫЫ ООШШИИББООКК
       При  неудачном  завершении  вызова  mmkknnoodd  переменная
       eerrrrnnoo может принимать следующие значения:

       [[EEPPEERRMM]]     Процесс  работает  в  непривилегированном
                   режиме.

       [[EENNOOTTDDIIRR]]   Какая-либо  компонента  имени  файла   не
                   является каталогом.

       [[EENNOOEENNTT]]    Какая-либо  компонента  имени  файла   не
                   существует.

       [[EERROOFFSS]]     Файловая система закрыта на запись.

       [[EEEEXXIISSTT]]    Указанный файл уже существует.

       [[EEFFAAUULLTT]]    Адрес  параметра  указывает  за   границы
                   адресного пространства процесса.

       [[EELLOOOOPP]]     Слишком много  косвенных  ссылок  на  имя
                   файла.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _c_h_m_o_d(2), _s_t_a_t(2), _u_m_a_s_k(2)

ЗЗААММЕЕЧЧААННИИЯЯ
       Для     нормальной     работы     команды     bbaaddsseecctt
       (см. _b_a_d_s_e_c_t(8)) создана возможность создавать файл с
       нулевым  типом   (файл   неопределенного   типа).   В


                            -1-                     ДЕМОС/PV


MKNOD(2)          ДЕМОС. Системные вызовы           MKNOD(2)


       создаваемом файле прописываются указанные в системном
       вызове _m_a_j_o_r и _m_i_n_o_r. Специфика такого  использования
       состоит  в  том,  что  поле,  описывающее  устройство
       (_m_i_n_o_r и _m_a_j_o_r), совпадает с полем  нулевого  прямого
       блока    в   структуре   I-узла   (см.   include-файл
       <_s_y_s/_i_n_o_d_e._h>).






















































                            -2-                     ДЕМОС/PV

