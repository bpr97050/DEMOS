
DIFF(1)                ДЕМОС. Команды                DIFF(1)


ИИММЯЯ
       ddiiffff - сравнение файлов и каталогов.

ФФООРРММААТТ
       ddiiffff [--ll] [--rr] [--ss] [--cceeffhh] [--bb] _с_п_р_1 _с_п_р_2
       ddiiffff [--cceeffhh] [--bb] _ф_а_й_л_1 _ф_а_й_л_2
       ddiiffff [--DD_с_т_р_о_к_а] [--bb] _ф_а_й_л_1 _ф_а_й_л_2

ООППИИССААННИИЕЕ
       Если оба параметра являются каталогами, ddiiffff  состав-
       ляет  списки имен содержащихся в них файлов (отсорти-
       ровав их в алфавитном порядке) и выполняет регулярную
       процедуру  сравнения  над текстовыми файлами.  Если в
       каталогах содержатся  несовпадающие  подкаталоги  или
       нетекстовые  файлы  с одинаковыми именами, они просто
       перечисляются.  Перечисляются также файлы,  встречаю-
       щиеся  только  в  одном  из  каталогов. При сравнении
       каталогов можно задавать следующие ключи:

       --ll     длинный формат выдачи - каждый текстовый  файл
              выводится с помощью команды pprr, отличия в фай-
              лах других типов накапливаюся и выдаются после
              сообщений о всех текстовых файлах;

       --rr     команда ddiiffff выполняется рекурсивно  для  всех
              подкаталогов с одинаковыми именами;

       --ss     команда сообщает только о совпадающих файлах;

       --SS_и_м_я  сравнение содержимого каталогов  начинается  с
              _и_м_е_н_и.

       Команда ddiiffff сообщает, какие строки должны быть изме-
       нены  в  двух  файлах, чтобы они совпали. Если вместо
       _ф_а_й_л_1 (_ф_а_й_л_2) указан  '--',  используется  стандартный
       файл  ввода.  Если  один  из  параметров указывает на
       каталог, используется тот файл в этом  каталоге,  чье
       имя совпадает с именем файла _ф_а_й_л_2 (_ф_а_й_л_1).  Нормаль-
       ный вывод содержит строки следующего вида:

              _n_1 aa _n_3, _n_4
              _n_1, _n_2 dd _n_3
              _n_1, _n_2 cc _n_3, _n_4

       Эти строки соответствуют командам eedd для преобразова-
       ния  _ф_а_й_л_а_1  в  _ф_а_й_л_2.   Числа после букв относятся к
       файлу _ф_а_й_л_2.  На самом деле, меняя aa на dd и производя
       чтение  в  обратном  порядке, можно также определить,
       как преобразовать _ф_а_й_л_2 в _ф_а_й_л_1.  Как и в eedd,  одина-
       ковые пары, в которых _n_1=_n_2 или _n_3=_n_4, сокращаются до
       одного числа.

       После каждой из этих строк следуют все  соответствую-
       щие  строки  первого  файла, отмеченные знаком '<<', а
       затем все соответствующие строки второго файла, отме-
       ченные знаком '>>'.




                            -1-                     ДЕМОС/PV


DIFF(1)                ДЕМОС. Команды                DIFF(1)


       Ключ --bb приводит к игнорированию заключительных  про-
       белов  и символов табуляции, а также к тому, что раз-
       личные последовательности пробелов считаются  эквива-
       лентными.

       Следующая группа ключей является взаимоисключающей:

       --ee     Приводит к созданию списка команд aa, cc и dd для
              редактора  eedd,  который  воссоздает  _ф_а_й_л_2  из
              _ф_а_й_л_а_1 (команды ww и qq в конец списка не  допи-
              сываются).   Следующая программа для интерпре-
              татора команд совместно с ключом  --ee  помогает
              сопровождать   несколько   версий  файла.  Под
              руками  нужно  иметь  только  исходную  версию
              файла  ($1)  и  цепочку  списков команд eedd для
              перехода от одной версии к другой,  полученных
              с  помощью eedd ($2, $3, ...).  Последняя версия
              помещается в стандартный файл вывода:

                (sshhiifftt; ccaatt $*; eecchhoo '1,$pp') | eedd - $1

       --ff     Генерирует  список,  аналогичный  --ee,  но   не
              используемый с eedd, и в обратном порядке.

       --cc     Выдает контекст, в котором  встречаются  изме-
              ненные   строки.  По  умолчанию  выдается  три
              строки до и  три  строки  после  различающихся
              строк.  Число  дополнительно  выдаваемых строк
              можно задавать. Так, команда  с  ключом  --cc10,
              будет  выдавать  10 строк до  и 10 строк после
              каждой различающейся строки. Кроме  того,  при
              задании  --cc выдаются имена сравниваемых файлов
              с датами  их  создания.   Сообщения  о  каждом
              изменении  разделяются  строками '********************'.
              Строки, отсутствующие  в  _ф_а_й_л_е_1,  маркируются
              символом  '--';  строки,  добавленные в _ф_а_й_л_2 -
              символом '++';  измененные  строки  -  символом
              '!!'.

       --DD_с_т_р_о_к_а
              Создает объединенную версию  файлов  (_ф_а_й_л_1  и
              _ф_а_й_л_2),   окружая   все  различающиеся  строки
              директивами условной компиляции  препроцессора
              языка  Си.  При  этом  _с_т_р_о_к_а  используется  в
              качестве  аргумента  директив   препроцессора.
              Так,  если  в файлax _f_i_l_e_1 и _f_i_l_e_2 различается
              строка

              lloonngg iinntt _k = 1000000; /* строка из _f_i_l_e_1 */
              iinntt _k = 1000000;      /* строка из _f_i_l_e_2 */

              то команда:

              ddiiffff --DD_L_O_N_G_I_N_T _f_i_l_e_1 _f_i_l_e_2

              породит выдачу в стандартный  вывод  файла,  в
              котором данная строка будет заменена на следу-
              ющую конструкцию:


                            -2-                     ДЕМОС/PV


DIFF(1)                ДЕМОС. Команды                DIFF(1)


              #iiffnnddeeff _L_O_N_G_I_N_T
              lloonngg iinntt _k = 1000000; /* строка из _f_i_l_e_1 */
              #eellssee _L_O_N_G_I_N_T
              iinntt _k = 1000000;      /* строка из _f_i_l_e_2 */
              #eennddiiff _L_O_N_G_I_N_T

       --hh     По этому  ключу  ddiiffff  выполняет  свою  работу
              быстро  и  грубо. Этот режим работает только в
              тех случаях, когда участки  изменений  малы  и
              хорошо  отделены  друг  от друга, однако может
              обрабатывать  файлы  неограниченной  длины.  С
              ключом --hh не допускаются ключи --ee и --ff.

       За исключением редких случаев, ddiiffff находит  наимень-
       ший достаточный набор различий файлов.

ФФААЙЙЛЛЫЫ
       /_t_m_p/_d?????
       /_u_s_r/_l_i_b/_d_i_f_f_h   для ключа --hh.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _c_m_p(1), _c_o_m_m(1), _e_d(1)

ДДИИААГГННООССТТИИККАА
       Код возврата равен:

       0 - если нет различий,
       1 - если различия есть,
       2 - если выполнение команды неудачно.

ЗЗААММЕЕЧЧААННИИЯЯ
       Списки редактирования, генерируемые с  ключами  --ee  и
       --ff, не создают строк, состоящих из одной точки.



























                            -3-                     ДЕМОС/PV

