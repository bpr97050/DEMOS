
RK(4)             ДЕМОС. Специальные файлы             RK(4)


ИИММЯЯ
        rrkk - кассетные диски СМ 5400 (ИЗОТ-1370).

ООППИИССААННИИЕЕ
        Данный специальный файл позволяет  работать  с  уст-
        ройством  СМ5400,  как  с  последовательным  файлом.
        Блоки файла размером 512 байтов имеют номера от 0 до
        4871.   Младшие  разряды  дополнительных  кодов уст-
        ройств являются номерами накопителей, подключенных к
        одному контроллеру (до 8 накопителей).

        Для данных  файлов  доступ  к  диску  осуществляется
        через  обычный  системный механизм буферизации, поэ-
        тому чтение или запись этих  файлов  не  зависит  от
        размера  физических  записей  на диске.  Кроме того,
        существует "прозрачный"  (rraaww)  режим  ввода/вывода,
        который обеспечивает непосредственную  передачу дан-
        ных между диском и принадлежащим пользователю  буфе-
        ром чтения/записи. Один вызов типа rreeaadd (чтение) или
        wwrriittee (запись) влечет за собой только одну  операцию
        физического  ввода/вывода.  "Прозрачный"  ввод/вывод
        считается более эффективным в случаях, когда единов-
        ременно  передаются большие объемы информации. Имена
        файлов,    обеспечивающих     "прозрачный"     режим
        ввода/вывода, начинаются с символов _r.

        При  работе  в  "прозрачном"  режиме  адрес   буфера
        ввода-вывода  должен быть выровнен по границе слова,
        а число передаваемых байтов должно быть  кратно  512
        (т.е.  сектору диска).  Аналогичным образом в других
        вызовах следует указывать смещения, кратные 512 бай-
        там.

ФФААЙЙЛЛЫЫ
        /_d_e_v/_r_k[0-7]
        /_d_e_v/_r_r_k[0-7]

ДДИИААГГННООССТТИИККАА
        rrkk%%dd: _h_a_r_d _e_r_r_o_r _b_n %_d _e_r=%_b _d_s=%_b
                После соответствующего числа повторов обмена
                зафиксирована   неисправимая   ошибка   уст-
                ройства. Выдается номер блока  и  содержание
                регистров команд и ошибок устройства.

        rrkk%%dd: _w_r_i_t_e _l_o_c_k_e_d
                Попытка  записи  на  устройство,   физически
                защищенное по записи.

ЗЗААММЕЕЧЧААННИИЯЯ
        При работе в "прозрачном"  режиме  системные  вызовы
        rreeaadd  и  wwrriittee  усекают заданное смещение в файле по
        границе 512-байтного блока.   Таким  образом,  прог-
        раммы,  которые, возможно, будут осуществлять доступ
        к устройствам "прозрачного" ввода/вывода  или  вызы-
        вать системные программы rreeaadd, wwrriittee и llsseeeekk, всегда
        должны оперировать блоками информации, кратными  512
        байтам.



                            -1-                      ДЕМОС/P

