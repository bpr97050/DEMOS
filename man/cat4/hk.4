
HK(4)             ДЕМОС. Специальные файлы             HK(4)


ИИММЯЯ
        hhkk - пакетные диски СМ 5408 (RK611/RK06, RK07).

ООППИИССААННИИЕЕ
        Данный специальный файл позволяет  работать  с  уст-
        ройством  СМ5408,  как  с  последовательным  файлом.
        Диск делится на несколько частей, каждая из  которых
        может  содержать  файловую систему.  Для определения
        номера части используются  биты  07  дополнительного
        кода устройства. Биты 070 используются для определе-
        ния номера дисковода.   В  данном  варианте  системы
        физический диск распределяется следующим образом:

        Имя  Начало Длина Цилиндры Назначение
        _h_k?_a 0      5940  0-89     /
        _h_k?_b 5940   5280  90-169   _s_w_a_p
        _h_k?_c 11220  41910 170-814  /_u_s_r (RK07)
        _h_k?_d 11220  15906 170-410  /_u_s_r (СМ5408, RK06)
        _h_k?_g 0      27126 0-410    полный пакет (СМ5408)
        _h_k?_h 0      53790 0-814    полный пакет (RK07)

        Части _e и _f не используются.

        Для данных  файлов  доступ  к  диску  осуществляется
        через  обычный  системный механизм буферизации, поэ-
        тому чтение или запись этих  файлов  не  зависит  от
        размера  физических  записей  на диске.  Кроме того,
        существует "прозрачный"  (rraaww)  режим  ввода/вывода,
        который обеспечивает непосредственную  передачу дан-
        ных между диском и принадлежащим пользователю  буфе-
        ром чтения или записи. Один вызов типа rreeaadd (чтение)
        или wwrriittee (запись) влечет за собой только одну  опе-
        рацию    физического    ввода/вывода.   "Прозрачный"
        ввод/вывод считается  более эффективным  в  случаях,
        когда единовременно передаются большие объемы инфор-
        мации.  Имена  файлов,  обеспечивающих  "прозрачный"
        режим ввода/вывода, начинаются с символов _r.

        При  работе  в  "прозрачном"  режиме,  адрес  буфера
        ввода-вывода  должен быть выровнен по границе слова,
        а число передаваемых байтов должно быть  кратно  512
        (т.е.  блоку  диска).   Аналогичным образом в других
        вызовах следует указывать смещения, кратные 512 бай-
        там.

ФФААЙЙЛЛЫЫ
        /_d_e_v/_h_k[0-7][a-h]
        /_d_e_v/_r_h_k[0-7][a-h]

ДДИИААГГННООССТТИИККАА
        _h_k%_d%_c: hhaarrdd eerrrroorr bbnn %d cs=%b er%b
                Эта диагностика появляется, если после  нес-
                кольких попыток операция обмена с диском все
                же  закончилась  неудачно.   Выдается  номер
                блока,  который  не удалось прочитать (запи-
                сать) и значения регистров команд  и  ошибок
                контроллера.



                            -1-                      ДЕМОС/P


HK(4)             ДЕМОС. Специальные файлы             HK(4)


        _h_k%_d: wwrriittee lloocckkeedd.
                Данная  диагностика  выдается  при   попытке
                записи на устройство физически защищенное по
                записи (в соответствующее положение установ-
                лен переключатель на дисководе).

        _h_k%_d%_c: ssoofftt eecccc bbnn %d.
                Произошла корректируемая ошибка чтения, ука-
                зываются  номера  дисковода,  части и блока.
                Обычно подобная  ситуация  возникает  доста-
                точно  редко (несколько раз в неделю) и диа-
                гонстика чисто предупредительная.  При  уве-
                личение  частоты появления таких ошибок поп-
                робуйте перезаписать указанный сектор.

ЗЗААММЕЕЧЧААННИИЯЯ
        При работе в "прозрачном"  режиме  системные  вызовы
        rreeaadd  и  wwrriittee  усекают заданное смещение в файле по
        границе 512-байтного блока.   Таким  образом,  прог-
        раммы,  которые, возможно, будут осуществлять доступ
        к устройствам "прозрачного" ввода/вывода  или  вызы-
        вать системные программы rreeaadd, wwrriittee и llsseeeekk, всегда
        должны оперировать блоками информации, кратными  512
        байтам.




































                            -2-                      ДЕМОС/P

