
FD(4)             ДЕМОС. Специальные файлы             FD(4)


ИИММЯЯ
        ffdd - накопитель на гибких дисках Электроники-85.

ООППИИССААННИИЕЕ
        Данный специальный файл позволяет работать с гибкими
        дисками  Электроники-85, как с последовательным фай-
        лом. Блоки файла размером по 512 байтов имеют номера
        от 0 до 799 (всего 400 Кб).  Младшие три бита допол-
        нительного номера устройства определяют тип размеще-
        ния  блоков на гибком диске (interleaving).  Старшие
        биты содержат номер накопителя (до  4  накопителей).
        На Электронике-85 обычно установлены два накопителя,
        верхний имеет номер 0, нижний - номер 1.  При работе
        с  двухсторонними  дискетами  емкость  одной дискеты
        равна 800 Кб.

        Типы размещения блоков:

    Номер Имя           Число      Длина  Тип
                  пов.  дор. сект. сект.  размещения

     0    _f_d?      1     80   10    512   формат ДЕМОС 2

     1    _f_d?._n_i_l  1     80   10    512   без чередования

     2    _f_d?._r_t   1     80   10    512   формат RT-11

     3    зарезервировано для дальнейшего использования

     4    _f_d?._d    2     80   10    512   формат ДЕМОС 2,
                                          совместим с 1

     5    _f_d?._d_n_i_l 2     80   10    512   без чередования

     6    _f_d?._r_t_2  1     80   10    512   вторая сторона,
                                          формат RT-11

     7    _f_d?._d_2   2     80   10    512   интерливинг 3/20

        Для данных файлов доступ к гибкому диску осуществля-
        ется  через  обычный системный механизм буферизации,
        поэтому чтение или запись этих файлов не зависит  от
        размера  физических  записей на гибком диске.  Кроме
        того,   существует    "прозрачный"    (_r_a_w)    режим
        ввода/вывода,  который обеспечивает непосредственную
        передачу данных между гибким диском и  принадлежащим
        пользователю  буфером чтения/записи. Один вызов типа
        rreeaadd (чтение) или wwrriittee  (запись)  влечет  за  собой
        только   одну   операцию  физического  ввода/вывода.
        "Прозрачный" ввод/вывод считается более  эффективным
        в  случаях,  когда  единовременно передаются большие
        объемы  информации.  Имена  файлов,   обеспечивающих
        "прозрачный" режим ввода/вывода, начинаются с симво-
        лов _r.

        При  работе  в  "прозрачном"  режиме  адрес   буфера
        ввода-вывода  должен быть выровнен по границе слова,
        а число передаваемых байтов должно быть  кратно  512


                            -1-                      ДЕМОС/P


FD(4)             ДЕМОС. Специальные файлы             FD(4)


        (т.е.  сектору диска).  Аналогичным образом в других
        вызовах следует указывать смещения, кратные 512 бай-
        там.

ФФААЙЙЛЛЫЫ
        /_d_e_v/_f_d[0-3]
        /_d_e_v/_f_d[0-3].*
        /_d_e_v/_r_f_d[0-3]
        /_d_e_v/_r_f_d[0-3].*

ДДИИААГГННООССТТИИККАА
        ffdd%%dd: _e_r_r _b_n %_d _e_r=%_b _d_s=%_b
                После соответствующего числа повторов обмена
                зафиксирована   неисправимая   ошибка   уст-
                ройства. Выдается номер блока  и  содержание
                регистров команд и ошибок устройства.

        ffdd%%dd: _w_r_i_t_e _l_o_c_k_e_d
                Попытка записи на устройство физически защи-
                щенное по записи.

        ffdd%%dd: _d_r_i_v_e _n_o_t _r_e_a_d_y
                Гибкий диск не вставлен в накопитель.

ЗЗААММЕЕЧЧААННИИЯЯ
        При работе в "прозрачном"  режиме  системные  вызовы
        rreeaadd  и  wwrriittee  усекают заданное смещение в файле по
        границе 512-байтного блока.   Таким  образом,  прог-
        раммы,  которые, возможно, будут осуществлять доступ
        к устройствам "прозрачного" ввода/вывода  или  вызы-
        вать системные программы rreeaadd, wwrriittee и llsseeeekk, всегда
        должны оперировать блоками информации, кратными  512
        байтам.

        Данная версия поддерживает  только  один  контроллер
        НГМД.
























                            -2-                      ДЕМОС/P

