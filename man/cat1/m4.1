
M4(1)                  ДЕМОС. Команды                  M4(1)


ИИММЯЯ
       mm44 - макропроцессор.

ФФООРРММААТТ
       mm44 [_ф_а_й_л...]

ООППИИССААННИИЕЕ
       Макропроцессор mm44 предназначен  для  использования  в
       качестве  препроцессора языков Фортран, Си и др. Каж-
       дый из файлов, указанных в параметрах, обрабатывается
       по  очереди.  Если параметры отсутствуют или парамет-
       ром является '--', считывается стандартный файл ввода.
       Обработанный  текст  записывается  в стандартный файл
       вывода.

       Формат макровызова:

              ииммяя((_п_а_р_1,_п_а_р_2,...,_п_а_р_N))

       Символ '(('  должен  следовать  непосредственно  после
       имени  макроопределения.  Если символ '((' отсутствует
       после имени, считается, что макро не  имеет  парамет-
       ров.   При перечислении параметров начальные пробелы,
       символы табуляции и новой строки,  не  заключенные  в
       кавычки,  игнорируются.  Имена макроопределений могут
       состоять из букв, цифр и символов подчеркивания  '__',
       причем первым символом не должна быть цифра.

       Можно отказаться от немедленной подстановки  значения
       макроимени.  Для этой цели соответствующие последова-
       тельности символов заключаются в апострофы (`').  При
       каждом  просмотре макропроцессора один уровень апост-
       рофов удаляется.

       Когда обнаруживается имя макроопределения, его  пара-
       метры   последовательно  обрабатываются.   Вычисление
       макроопределений обычно  продолжается  при  просмотре
       параметров,  и любые запятые или правые скобки, кото-
       рые могут появиться  в  значении  вложенного  вызова,
       имеют такое же действие, как и исходный текст.  После
       подстановки  значение  макро  помещается  обратно  во
       входной поток и просматривается повторно.

       Далее приводится краткое описание встроенных макрооп-
       ределений  mm44, которые и определяют входной язык мак-
       ропроцессора.  Возможно задание своих макро с  совпа-
       дающими  именами,  однако  после  этого  их начальный
       смысл теряется.  Как правило, встроенные макро выдают
       значение _п_у_с_т_о (если в описании не сказано иначе).

       ddeeffiinnee(_и_м_я,_з_н_а_ч_е_н_и_е)
              Второй  параметр  устанавливается  в  качестве
              значения  макроимени, указаного в первом пара-
              метре.  Каждое употребление  $_n  в  замещающем
              тексте,  где  _n  -  цифра,  заменяется на _n-ый
              параметр.  Параметр 0 представляет  собой  имя
              макро.    Отсутствующие  параметры  заменяются
              пустыми строками.


                            -1-                     ДЕМОС/PV


M4(1)                  ДЕМОС. Команды                  M4(1)


       uunnddeeffiinnee(`_и_м_я')
              Удаляет определение макро, указанного в  пара-
              метре.

       iiffddeeff(`_и_м_я',_п_а_р_а_м_2,_п_а_р_а_м_3)
              Если  первый  параметр  определен,   значением
              является  второй  параметр, если нет - третий.
              Если третий  параметр  отсутствует,  значением
              является пусто.

       cchhaannggeeqquuoottee(_l,_r)
              Заменяет символы экранирования (апострофы)  на
              первый  и  второй параметры. Вызов cchhaannggeeqquuoottee
              без параметров восстанавливает исходные значе-
              ния (т.е. ``'').

       ddiivveerrtt(_n)
              Макропроцессор обслуживает до 10 выводных фай-
              лов, пронумерованных от 0 до 9. Конечный вывод
              представляет собой конкатенацию этих файлов  в
              порядке  их  номеров.  По умолчанию информация
              выдается в стандартный  файл  вывода  (файл  с
              номером  0).   Макро  ddiivveerrtt  заменяет текущий
              выходной файл на указанный в параметре (цифро-
              вая  строка).  Вывод,  который  направляется в
              файл номером, не входящим в диапазон 0-9, отб-
              расывается.

       uunnddiivveerrtt(_n_1,_n_2 ...)
              Вызывает немедленный вывод текста из всех ука-
              занных  файлов (или из всех файлов, если пара-
              метры отсутствуют). Текст может быть выведен в
              другой  файл.  При  выводе  информация в файле
              уничтожается.

       ddiivvnnuumm Возвращает значение текущего выходного файла.

       ddllnn    Считывает и отбрасывает символы до  следующего
              символа новой строки включительно.

       iiffeellssee(_a,_b,_c,_d)
              Имеет три или более  параметров.  Если  первый
              параметр  совпадает со вторым, третий параметр
              используется в качестве значения.  Если это не
              так  и  если имеется более четырех параметров,
              данный процесс повторяется для  параметров  4,
              5,  6 и 7.  В противном случае значением явля-
              ется либо четвертая  строка,  либо,  если  она
              отсутствует - пусто.

       iinnccrr(_ч_и_с_л_о)
              Возвращает значение своего  параметра,  увели-
              ченное на 1. Исходная строка цифр рассматрива-
              ется как десятичное число.

       eevvaall(_в_ы_р_а_ж_е_н_и_е)
              Выдает  значение  указанного  выражения.   При
              вычислении   используется  32-разрядная  целая


                            -2-                     ДЕМОС/PV


M4(1)                  ДЕМОС. Команды                  M4(1)


              арифметика.  Операции включают в себя ++, --, **,
              //,  %%,  ^^  (возведение  в степень), отношения,
              скобки.

       lleenn(_с_т_р_о_к_а)
              Возвращает количество символов в _с_т_р_о_к_е.

       iinnddeexx(_с_т_р_о_к_а__1,_с_т_р_о_к_а__2)
              Возвращает номер символа _с_т_р_о_к_и__1, с  которого
              начинается  вхождение _с_т_р_о_к_и__2.  Счет символов
              начинается с нуля.  Если в _с_т_р_о_к_е__1  вхождений
              _с_т_р_о_к_и__2 не обнаружено, возвращается -1.

       ssuubbssttrr(_s,_i,_n)
              Возвращает подстроку строки _s, начинающуюся  с
              _i-той позиции, длиной в _n символов.  Счет сим-
              волов начинается с нуля.  Если третий параметр
              отсутствует,  считается, что подстрока продол-
              жается до конца строки _s.

       ttrraannsslliitt(_s,_f,_t)
              Перекодирует строку _s, заменяя символы, входя-
              щие  в  строку  _f,  соответствующими символами
              строки _t.

       iinncclluuddee(_и_м_я)
              Заменяется на  содержимое  файла  с  указанным
              _и_м_е_н_е_м.

       ssiinncclluuddee(_и_м_я)
              Аналогично iinncclluuddee, за исключением  того,  что
              если  файл недоступен, диагностика не выдается
              и процесс работы макропроцессора  не  прерыва-
              ется.

       ssyyssccmmdd(_к_о_м_а_н_д_а)
              Выполняет указанную _к_о_м_а_н_д_у системы.  Значение
              не возвращается.

       mmaakkeetteemmpp(..._X_X_X...)
              Заменяет символы _X_X_X идентификатором  текущего
              процесса.

       eerrrrpprriinntt(_с_т_р_о_к_а__1,_с_т_р_о_к_а__2,...)
              Выдает указанные  строки  в  стандартный  файл
              диагностических сообщений.

       dduummppddeeff(_и_м_я__1,_и_м_я__2...)
              Выдает текущие имена и определения для указан-
              ных   параметров   (или  все,  если  параметры
              отсутствуют).

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _m_m(1)
       Имеется отдельное описание mm44.





                            -3-                     ДЕМОС/PV

