
ERROR(1)               ДЕМОС. Команды               ERROR(1)


ИИММЯЯ
       eerrrroorr - анализирует и записывает  сообщения  компиля-
       тора.

ФФООРРММААТТ
       eerrrroorr  [--nn]  [--ss]  [--qq]  [--vv]  [--tt  _с_п_и_с_о_к__с_у_ф_ф_и_к_с_о_в]
       [--II _ф_а_й_л__о_т_м_е_н_ы] [_и_м_я]

ООППИИССААННИИЕЕ
       Команда eerrrroorr  анализирует  и  по  режиму  записывает
       сообщения об ошибках, выдаваемых рядом компиляторов и
       языковых процессоров, в исходный файл, в  ту  строку,
       где  эти  ошибки  были  обнаружены.  Это может помочь
       избежать традиционно  мучительных  методов  поиска  в
       документации  расшифровки  сокращенных  сообщений  об
       ошибках и позволяет одновременно видеть сообщение  об
       ошибке и исходный текст без манипуляций с несколькими
       окнами в экранном редакторе.

       Команда eerrrroorr  просматривает  сообщения  об  ошибках,
       поступающих  из файла _и_м_я или со стандартного ввода и
       пытается определить, какой языковый процессор породил
       каждое  из этих сообщений, определяет исходный файл и
       номер строки, на которые ссылается сообщение, опреде-
       ляет, надо ли игнорировать это сообщение, и вставляет
       (возможно,  слегка  модифицированное)  сообщение   об
       ошибке  в  исходный  файл  в  качестве  комментария в
       строку,  предшествующую  той,  на  которую  ссылается
       сообщение.   Сообщения об ошибках, которые не удается
       связать с каким-либо языковым процессором или  понять
       их  смысл,  не вставляются ни в какой файл, а посыла-
       ются в стандартный  файл  вывода.   Команда  изменяет
       исходный  файл  только  после  того,  как вся вводная
       информация прочитана.  Заданием режима  подтверждений
       (ключ  --qq), пользователь просит запрашивать подтверж-
       дение для  любых  потенциально  опасных  (таких,  как
       запись  в  файл) или чрезмерно многословных действий.
       Иначе eerrrroorr продолжает работать по своему  разумению.
       Если  задан ключ --tt доступа к файлам по записи и свя-
       занный с ним список суффиксов, eerrrroorr будет  осуществ-
       лять  запись только в те файлы, суффиксы которых име-
       ются в  списке  суффиксов.   Для  eerrrroorr  можно  также
       задать  режим  (ключ  --vv)  вызова редактора _e_d(1) для
       работы с файлами, в которые были вставлены  сообщения
       об  ошибках,  что позволяет избежать запоминания имен
       файлов, в которых были допущены ошибки.

       Команда eerrrroorr предполагает работу со стандартным вво-
       дом,  подключенном к источнику сообщений об ошибках с
       помощью  конвейера.   Некоторые  языковые  процессоры
       помещают  сообщения  об  ошибках  в  свои стандартные
       файлы сообщений; другие выдают сообщения в  стандарт-
       ный файл вывода.  Поэтому оба источника ошибок должны
       быть объединены вместе для работы  eerrrroorr.   Например,
       если используется конвейер команд

              mmaakkee --ss _l_i_n_t |& eerrrroorr --qq --vv



                            -1-                     ДЕМОС/PV


ERROR(1)               ДЕМОС. Команды               ERROR(1)


       будут анализироваться все сообщения,  поступающие  от
       любой  программы, к которой mmaakkee будет обращаться при
       выполнении цели _l_i_n_t.

       Команда  eerrrroorr  обрабатывает  сообщения  об  ошибках,
       выдаваемые  программами: mmaakkee, cccc, ccpppp, aass, lldd, lliinntt,
       ff7777.  Команда eerrrroorr обрабатывает  сообщения  языковых
       процессоров  об  ошибках  в  их стандартных форматах,
       поэтому программа чувствительна к изменениям  в  этих
       форматах.   Для  всех  языков  сообщения  об  ошибках
       должны помещаться на одной строке.  Некоторые сообще-
       ния  относятся более чем к одной строке и более чем к
       одному файлу; eerrrroorr дублирует сообщения  и  вставляет
       их во все места, на которые есть ссылка.

       Команда выполняет над сообщениями одну из шести  опе-
       раций:

       Унификация сообщений.
                 Некоторые языковые процессоры выдают корот-
                 кие  сообщения,  описывающие обрабатываемый
                 файл.  eerrrroorr использует эту информацию  для
                 определения  имени  файла для языковых про-
                 цессоров, которые не включают имя  файла  в
                 каждое  сообщение  об ошибке.  Такие специ-
                 альные сообщения, используемые при унифика-
                 ции других сообщений, никуда не вставляются
                 и используются только программой eerrrroorr.

       Пропуск сообщений.
                 Сообщения об  ошибках  от  программы  lliinntt,
                 ссылающиеся  на  одну  из  двух стандартных
                 библиотек    lliinntt:    /_u_s_r/_l_i_b/_l_l_i_b-_l_c    и
                 /_u_s_r/_l_i_b/_l_l_i_b-_p_o_r_t  пропускаются  для  пре-
                 дотвращения случайной записи в эти  библио-
                 теки.   Эти  сообщения  полностью "поглоща-
                 ются" программой eerrrroorr.

       Отмененные сообщения.
                 Сообщения  об  ошибках  от  программы  lliinntt
                 могут  подавляться,  если  они ссылаются на
                 специальные  функции,  на  которые  априори
                 будут  выданы совершенно неинтересные сооб-
                 щения.  Отмененные сообщения не вставляются
                 в  исходный  файл,  хотя  и  записываются в
                 стандартный файл  вывода.   Имена  функций,
                 для   которых   надо  подавлять  сообщения,
                 берутся из файла ._e_r_r_o_r_r_c в регистрационном
                 каталоге пользователя или из файла, следую-
                 щего за ключом --II.  Если  таких  файлов  не
                 существует,  никакие  сообщения не подавля-
                 ются.  Если один из  таких  файлов  сущест-
                 вует, то в нем на каждой строке должно быть
                 записано имя одной функции.

       Ошибки, не относящиеся к конкретным файлам.
                 Сообщения, не относящиеся к конкретным фай-
                 лам,  группируются  вместе и записываются в


                            -2-                     ДЕМОС/PV


ERROR(1)               ДЕМОС. Команды               ERROR(1)


                 файл стандартного вывода до  начала  работы
                 программы  с исходными файлами. Эти сообще-
                 ния никуда не вставляются.

       Ошибки в файле, не относящиеся к конкретной строке.
                 Сообщения об ошибках, относящиеся к  одному
                 определенному файлу, но не к какой-то конк-
                 ретной строке, записываются  в  файл  стан-
                 дартного вывода во время работы программы с
                 этим файлом.

       Правильные сообщения.
                 Сообщения, относящиеся к конкретной  строке
                 конкретного  файла, являются кандидатами на
                 включение в файл, на который они ссылаются.

       Только правильные сообщения являются  кандидатами  на
       включение  в файл, на который они ссылаются.  Осталь-
       ные сообщения поглощаются программой eerrrroorr или  выда-
       ются  в  стандартный  файл  вывода.   Программа eerrrroorr
       вставляет сообщения об ошибках  в  исходный  текст  в
       строку,  предшествующую  той, в которой языковый про-
       цессор обнаружил ошибку.  Каждое сообщение преобразу-
       ется в однострочный комментарий данного языка, внутри
       которого помечается строкой '######' в начале  сообщения
       об  ошибке  и  строкой  '%%%%%%' в конце сообщения.  Это
       упрощает контекстный поиск ошибок с помощью редактора
       и  позволяет легко удалить сообщения из текста.  Вдо-
       бавок  каждое  сообщение  об  ошибке  содержит  номер
       строки в исходном тексте, на которую сообщение ссыла-
       ется.  Разумно сформатированная программа может  быть
       перекомпилированна с записанными в нее сообщениями об
       ошибках, без  появления  новых  ошибок  в  результате
       записи  в  текст сообщений.  При неудачно сформатиро-
       ванной исходной программе на языках со свободным фор-
       матом,  таких,  как  Си  и  Паскаль,  может произойти
       вставка комментария внутрь другого  комментария,  что
       приведет  к наведенным ошибкам при следующей компиля-
       ции.  Для того, чтобы  избежать  этого,  распологайте
       текст  исходной  программы так, чтобы на одной строке
       не находились операторы и конец комментария.

       Возможны следующие ключи eerrrroorr:

       --nn   Не производить запись  ни  в  какие  файлы,  все
            сообщения на стандартный вывод.

       --qq   Спрашивать пользователя, можно ли  записывать  в
            файл.   Ответ  yy  или  nn на вопрос необходим для
            продолжения работы.  Отсутствие ключа  --qq  озна-
            чает,  что запись во все файлы, на которые будут
            ссылки  (за  исключением  ссылок  из  сообщений,
            которые будут отброшены) возможна.

       --vv   Вызов, после  записи  во  все  файлы,  экранного
            редактора  eedd  для редактирования всех файлов, в
            которые производилась запись,  с  настройкой  на
            первый  из  этих  файлов,  на  строку  с  первой


                            -3-                     ДЕМОС/PV


ERROR(1)               ДЕМОС. Команды               ERROR(1)


            ошибкой.

       --tt   Взять следующий аргумент в качестве списка  суф-
            фиксов.   Файл,  суффикс  которого отсутствует в
            этом списке, закрыт на запись.  Список суффиксов
            не  разделяется,  '*'  означает любую последова-
            тельность букв и  цифр.  Таким  образом,  список
            суффиксов:

             ._c._y._f_o_o*._h

            разрешает eerrrroorr запись в файлы,  заканчивающиеся
            ._c, ._y, ._f_o_o* и ._h.

       --ss   Выдача статистики по классам ошибок.   Как  пра-
            вило, этот ключ не очень нужен.

       Команда eerrrroorr ловит прерывания и сигналы окончания и,
       если  находится в стадии вставки сообщений в файл, то
       сначала закончит начатую работу.

ФФААЙЙЛЛЫЫ
       ~/._e_r_r_o_r_r_c   список имен функций, для которых  подав-
                    ляются сообщения от lliinntt
       /_d_e_v/_t_t_y     спецфайл (терминал пользователя)

ЗЗААММЕЕЧЧААННИИЯЯ
       Для работы программы  в  режиме  подтверждений  нужно
       вызывать ее в интерактивном режиме.

       Для исходного файла с несколькими связями  по  именам
       создается  новая  копия  только  с одной связью (т.е.
       только с одним именем).

       Изменение формата сообщений об ошибках языкового про-
       цессора  может  привести к тому, что eerrrroorr не распоз-
       нает этих сообщений.

       Программа eerrrroorr представляет собой достаточно простой
       механизм,  который  не вылавливает ошибки, наведенные
       одной-единственной тривиальной  синтаксической  ошиб-
       кой.   С  исправлением  наведенных ошибок человек по-
       прежнему справляется лучше любой программы.

       Транслятор с Паскаля  помещает  сообщение  об  ошибке
       после строки, в которой она допущена (eerrrroorr переносит
       сообщение перед этой  строкой).   Кроме  того,  eerrrroorr
       выравнивает  символы  '||',  отмечающие  сообщения  об
       ошибке.

       Команда eerrrroorr была создана для работы с  относительно
       быстрыми терминалами.








                            -4-                     ДЕМОС/PV

