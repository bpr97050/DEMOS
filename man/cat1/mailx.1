
MAILX(1)               ДЕМОС. Команды               MAILX(1)


ИИММЯЯ
       mmaaiillxx - почтовая служба.

ФФООРРММААТТ
       mmaaiillxx [--ff [_ф_а_й_л]] [_а_д_р_е_с_а_т...]

ВВВВЕЕДДЕЕННИИЕЕ
       Команда mmaaiillxx реализует развитую систему  доставки  и
       обработки  почты.   Командный  язык  mmaaiillxx напоминает
       язык редактора eedd(1), но вместо строк  обрабатываются
       сообщения.

       ППооссыыллккаа ппооччттыы

       Чтобы послать сообщение одному или нескольким пользо-
       вателям, можно вызвать mmaaiillxx с именами этих пользова-
       телей в качестве аргументов.  После  этого  ожидается
       ввод  сообщения,  завершаемый CCTTRRLL//DD в начале строки.
       В разделе, озаглавленном "Как писать  и  отвечать  на
       письма,"   описаны  некоторые  возможности  программы
       mmaaiillxx, которые используются для составления писем.

       ККаакк ппррооччеессттьь ссооооббщщееннииее

       Обычно mmaaiillxx вызывается без аргументов и выдает сооб-
       щения из почтового ящика, печатая по одной информаци-
       онной строке для каждого сообщения.  Сначала  текущим
       сообщением  становится  первое  (номер  1).   Текущее
       сообщение может быть напечатано  при  помощи  команды
       pprriinntt (сокращенно pp).  От сообщения к сообщению можно
       переходить так же, как в eedd(1), при помощи команд '++'
       и  '--',  передвигаясь  назад и вперед, а также просто
       указывая номер адресуемого сообщения.

       УУннииччттоожжееннииее ссооооббщщеенниияя

       После прочтения  сообщения  можно  уничтожить  письмо
       (команда  ddeelleettee или dd) или ответить на него (команда
       rreeppllyy или rr).  После уничтожения  сообщения  почтовая
       служба  забывает  о  нем.  Если сеанс еще не окончен,
       уничтожение сообщения не является необратимым  дейст-
       вием,  сообщение можно восстановить с помощью команды
       uu (uunnddeelleettee), задав его номер или закончив  работу  с
       mmaaiillxx  командой  eexxiitt (сокращенно xx).  При нормальном
       завершении  работы  с  mmaaiillxx  уничтоженное  сообщение
       исчезает навсегда.

       ССппееццииффииккаацциияя ссооооббщщеенниийй

       Таким командам, как pprriinntt (или pp) и ddeelleettee в качестве
       аргументов  часто  задается список номеров сообщений.
       Так, 'ddeelleettee 1 7' уничтожает сообщения 1 и  7,  тогда
       как 'ddeelleettee 1-5' уничтожает с 1 по 5 сообщения.  Спе-
       циальное имя '**' адресует все сообщения, а '$$'  адре-
       сует  последнее сообщение. Так, команду ttoopp, печатаю-
       щую первые несколько строк сообщения, можно использо-
       вать как 'ttoopp **', чтобы напечатать первые строки всех
       сообщений.


                            -1-                     ДЕМОС/PV


MAILX(1)               ДЕМОС. Команды               MAILX(1)


       ККаакк ппииссааттьь ии ооттввееччааттьь ннаа ппииссььммаа

       Для того чтобы ответить на письмо, можно использовать
       команду  rreeppllyy, которая пошлет ответ отправителю дан-
       ного письма.  Затем набирается текст сообщения, кото-
       рый  завершается  символом  конец_файла  (CCTTRRLL//DD) или
       строкой, состоящей  только  из  одного  символа  '.'.
       Пока сообщение набирается, mmaaiillxx особым образом обра-
       батывает строки, начинающиеся с символа '~~'.   Напри-
       мер,  '~~mm' (напечатанное в отдельной строке) помещает
       копию текущего сообщения в текст ответа,  сдвигая  ее
       вправо  на  табуляцию.  Другие управляющие последова-
       тельности устанавливают предметные поля, добавляют  и
       исключают  адресатов  сообщения  и  позволяют вызвать
       редактор для изменения  сообщения  или  интерпретатор
       командного  языка  для  выполнения  каких-либо команд
       (эти ключи приводятся ниже).

       ООккооннччааннииее ссееааннссаа ррааббооттыы сс ппооччттоойй

       Работу с командой mmaaiillxx можно завершить командой qquuiitt
       (сокращенно qq).  Прочитанные сообщения отправляются в
       файл _m_b_o_x в регистрационном каталоге данного  пользо-
       вателя,  если  только они не уничтожены или не сохра-
       нены (в этих случаях они выбрасываются).  Непрочитан-
       ные  сообщения  возвращаются обратно в почтовый ящик.
       Команда mmaaiillxx с ключом  --ff [_ф_а_й_л]  читает  содержимое
       файла   _m_b_o_x  данного  пользователя  (или  указанного
       _ф_а_й_л_а) для обработки.   Если  введена  команда  qquuiitt,
       почтовая  служба  записывает неуничтоженные сообщения
       обратно в этот файл.

       ЛЛииччнныыее ии ооббщщеессииссттееммнныыее ссппииссккии рраассссыыллккии

       Можно создавать личные  списки  адресатов,  например,
       можно  посылать сообщение поименованной группе людей.
       Такой список можно задать, поместив строку вида

       aalliiaass _w_i_z_a_r_d_s _a_v_g _d_v_o_l_o_d_i_n _f_o_x _n_m_s _a_l_e_x

       в файл ._m_a_i_l_r_c в регистрационном  каталоге.   Текущий
       список  таких  псевдонимов  можно  получить  командой
       aalliiaass (сокращенно aa) в mmaaiillxx.   Общесистемные  списки
       рассылки    можно    создать   редактором   в   файле
       /_u_s_r/_l_i_b/_a_l_i_a_s_e_s, см.  _a_l_i_a_s_e_s(5)  и  _d_e_l_i_v_e_r_m_a_i_l(8);
       они имеют несколько отличный синтаксис.  В посылаемом
       сообщении личные псевдонимы  расшифровываются,  чтобы
       адресаты  могли  отвечать  друг другу.  Общесистемные
       псевдонимы в посылаемом сообщении не расшифровываются
       при  посылке  сообщения, но все ответы, приходящие на
       машину, будут иметь расшифрованные системные  псевдо-
       нимы,  так  как они проходят через ddeelliivveerrmmaaiill.  Если
       редактировался  файл   /_u_s_r/_l_i_b/_a_l_i_a_s_e_s,   необходимо
       запустить программу nneewwaalliiaasseess(1).

       Кроме рассылки писем пользователям,  mmaaiillxx  позволяет
       посылать  сообщения  _п_р_о_е_к_т_а_м.   Каждый  проект имеет
       свой  архив  и  список   рассылки;   имена   проектов


                            -2-                     ДЕМОС/PV


MAILX(1)               ДЕМОС. Команды               MAILX(1)


       отличаются  от имен пользователей тем, что начинаются
       со знака '=='.  Подробнее см.  _p_m_c_s(1) и  "Руководство
       пользователя mailx".

       РРаассссыыллккаа ппооччттыы вв ссееттяяхх ЭЭВВММ

       Чтобы послать почту через сеть UUCP , надо  использо-
       вать имена адресатов вида '_м_а_ш_и_н_а!!_п_о_л_ь_з_о_в_а_т_е_л_ь'.  При
       работе с UUCP , задавая '!!' в командной  строке  ccsshh,
       не забудьте экранировать его, поставив перед ним знак
       '\\'.  Адресаты на машинах, включенных в  сеть  СЕМОС,
       адресуются   как   '_м_а_ш_и_н_а::_п_о_л_ь_з_о_в_а_т_е_л_ь',   например,
       'kiae1700:alex'.

       Программа mmaaiillxx имеет набор переменных, которые можно
       установить в файле ._m_a_i_l_r_c; так 'sseett aasskkcccc' позволяет
       использовать 'aasskkcccc' (эти переменные описаны ниже).

ККРРААТТККООЕЕ ООППИИССААННИИЕЕ
       Каждая команда набирается на отдельной строке и может
       иметь аргументы, следующие за командным словом.  Нео-
       бязательно набирать команду полностью -  используется
       первая  команда, соответствующая введенному префиксу.
       Если команде, получающей в качестве аргументов список
       сообщений,  не задавать никакого списка, используется
       первое сообщение после текущего,  которое  удовлетво-
       ряет  требованиям команды.  Если после текущего сооб-
       щения ничего нет, поиск  возвращается  в  начало,  и,
       если  подходящих сообщений вообще нет, mmaaiillxx печатает
       "_Н_е_т  _п_о_д_х_о_д_я_щ_и_х  _с_о_о_б_щ_е_н_и_й"  и  не   выполняет   эту
       команду.

       --         Возвращается  на  предыдущее  сообщение   и
                 печатает  его. Если задан числовой аргумент
                 _n, возвращается на _n-тое предыдущее сообще-
                 ние и печатает его.

       ??         Печатает краткое описание команд.

       !! _к_о_м_а_н_д_а Выполнить _к_о_м_а_н_д_у интерпретатора командного
                 языка.

       aalliiaass     (aa) Без  аргументов  печатает  существующие
                 псевдонимы.   С  одним  аргументом печатает
                 этот псевдоним. С двумя аргументами и более
                 добавляет  пользователей, названных во вто-
                 ром и последующих аргументах к  псевдониму,
                 названному в первом аргументе.

       cchhddiirr     (cc) Заменяет рабочий  каталог  пользователя
                 на  тот,  который  указан.  Если каталог не
                 задан, то заменяет на регистрационный ката-
                 лог пользователя.

       ddeelleettee    (dd) Помечает указанные сообщения  как  уда-
                 ленные.  Удаленные  сообщения  не  будут ни
                 сохранены в файле _m_b_o_x, ни доступны  после-
                 дующим командам.


                            -3-                     ДЕМОС/PV


MAILX(1)               ДЕМОС. Команды               MAILX(1)


       ddpp        (также ddtt) Уничтожает текущее  сообщение  и
                 печатает  следующее.  Если следующего сооб-
                 щения нет, mmaaiillxx печатает "_К_о_н_е_ц _с_п_и_с_к_а".

       eeddiitt      (ee) Вызывает текстовый редактор (по умолча-
                 нию  - eedd(1)) для каждого сообщения из ука-
                 занного списка. После выхода  из  редактора
                 сообщение записывается обратно.

       eexxiitt      (eexx или xx) Немедленное окончание  работы  с
                 почтовой  службой  без изменения системного
                 почтового  ящика  пользователя,  его  файла
                 _m_b_o_x  или файла, редактируемого при исполь-
                 зовании ключа --ff.

       ffrroomm      (ff) Печатает заголовки указанных сообщений.

       hheeaaddeerrss   (hh) Печатает  текущий  диапазон  заголовков
                 группы  из  18 сообщений.  Если задан аргу-
                 мент '+', печатается группа из следующих 18
                 сообщений, а если '-' - то из предыдущих.

       hheellpp      Синоним команды ??.

       hhoolldd      (hhoo, также  pprreesseerrvvee)  Помечает  каждое  из
                 указанных  сообщений  для сохранения в сис-
                 темном почтовом ящике  пользователя  вместо
                 файла _m_b_o_x.  Не исключает команды ddeelleettee.

       mmaaiill      (mm) Получает в качестве аргументов  регист-
                 рационные имена пользователей и имена групп
                 адресатов, и рассылает почту этим людям.

       nneexxtt      (nn как ++ или перевод строки)  Переходит  на
                 следующее  сообщение в последовательности и
                 печатает его. Если указан  список  аргумен-
                 тов, печатает следующее сообщение, содержа-
                 щееся в списке.

       pprreesseerrvvee  Синоним hhoolldd.

       pprriinntt     (pp) Печатает каждое из указанных  сообщений
                 на терминале пользователя.

       pprroojjeeccttss  (pprroojj) Выводит список всех проектов, анало-
                 гично команде 'ppmmccss ll', см.  _p_m_c_s(1).

       qquuiitt      (qq) Завершает сеанс, сохраняя неудаленные и
                 не  сохраненные  командой  hhoolldd сообщения в
                 файле _m_b_o_x в регистрационном каталоге поль-
                 зователя,  сохраняя все сообщения, помечен-
                 ные командами hhoolldd и pprreesseerrvvee и непрочитан-
                 ные  сообщения  в  его  системном  почтовом
                 ящике, и удаляя все остальные сообщения  из
                 его  почтового ящика.  Если за время сеанса
                 получена новая  почта,  выдается  сообщение
                 "_В_а_м  _п_р_и_ш_л_а  _н_о_в_а_я _п_о_ч_т_а". Если производи-
                 лось редактирование  файла-почтового  ящика


                            -4-                     ДЕМОС/PV


MAILX(1)               ДЕМОС. Команды               MAILX(1)


                 при помощи ключа --ff, отредактированный файл
                 изменяется. Если удалось изменить  отредак-
                 тированный файл, происходит выход в интерп-
                 ретатор командного языка. В противном  слу-
                 чае можно выйти с помощью команды eexxiitt.

       rreeppllyy     (rr) Посылает почту автору каждого  из  ука-
                 занных  сообщений так же, как команда mmaaiill.
                 Команда  rreeppllyy  посылает  почту  не  только
                 автору  сообщения,  на которое Вы отвечали,
                 но  и  всем  остальным,  фигурировавшим   в
                 списке   адресатов  этого  сообщения.   Для
                 того, чтобы послать  почту  _т_о_л_ь_к_о  _а_в_т_о_р_у,
                 используйте команду RReeppllyy.

       rreessppoonndd   Синоним rreeppllyy.

       ssaavvee      (ss) Аргументы  -  список  сообщений  и  имя
                 файла. Добавляет все сообщения по очереди к
                 концу файла. Имя файла в кавычках  и  число
                 строк  и  символов  выводится  на  терминал
                 пользователя.

       sseett       (ssee) Без аргументов печатает значения  всех
                 переменных.   Иначе  устанавливает перемен-
                 ные.    Аргументы    задаются    в     виде
                 '_п_е_р_е_м_е_н_н_а_я=_з_н_а_ч_е_н_и_е' или '_п_е_р_е_м_е_н_н_а_я'.

       sshheellll     (sshh)  Вызывает   интерпретатор   командного
                 языка системы.

       ssiizzee      Печатает размер каждого из указанных  сооб-
                 щений в символах.

       ttoopp       Печатает первые несколько строк из  каждого
                 указанного сообщения.  Число строк хранится
                 в пременной ttoopplliinneess и по  умолчанию  равно
                 пяти.

       ttyyppee      (tt) Синоним pprriinntt.

       uunnaalliiaass   Аргумент - список имен, определенных коман-
                 дами  aalliiaass.   Выбрасывает  соответствующие
                 группы  пользователей.   Имя  группы  после
                 этого ничего не обозначает.

       uunnddeelleettee  (uu)  Восстанавливает   уничтоженные   ранее
                 командой ddeelleettee сообщения.

       uunnsseett     Сбрасывает существующие значения  указанных
                 переменных;   действие   обратно   действию
                 команды sseett.

       vviissuuaall    (vv) Вызывает экранный редактор (по  умолча-
                 нию  rreedd(1)) для каждого из указанных сооб-
                 щений.

       wwrriittee     (ww) Синоним ssaavvee.


                            -5-                     ДЕМОС/PV


MAILX(1)               ДЕМОС. Команды               MAILX(1)


       xxiitt       (xx) Синоним eexxiitt.

       Далее кратко описываются  управляющие  последователь-
       ности,  которые  используются  при составлении письма
       для выполнения специальных функций.   Они  опознаются
       только  если  стоят в начале строки, и обычно начина-
       ются с тильды, которую можно заменить  другим  симво-
       лом, установив переменную eessccaappee.

       ~~!!_к_о_м_а_н_д_а  Выполняет указанную _к_о_м_а_н_д_у интерпретатора
                  командного  языка, после чего возвращается
                  к сообщению.

       ~~cc _и_м_я ...
                  Добавляет заданные _и_м_е_н_а к списку  получа-
                  телей копий письма.

       ~~dd         Считывает содержимое файла _d_e_a_d._l_e_t_t_e_r  из
                  Вашего регистрационного каталога в письмо.

       ~~ee         Вызывает текстовый редактор  (он  задается
                  переменной  EEDDIITTOORR)  для обработки сообще-
                  ния.  После  окончания  работы   редактора
                  можно продолжать дописывать сообщение.

       ~~hh         Редактирует  поля  заголовка,  печатая  по
                  очереди  каждое  поле и позволяя пользова-
                  телю добавлять текст в конце или  изменять
                  поле  при  помощи символов отмены и забоя,
                  установленных для данного терминала.

       ~~mm _с_о_о_б_щ_е_н_и_я
                  Считывает  указанные  _с_о_о_б_щ_е_н_и_я  в   текст
                  посылаемого  письма,  сдвигая их вправо на
                  табуляцию. Если не указано ни одного сооб-
                  щения, читается текущее.

       ~~pp         Печатает сообщение в  том  виде,  как  оно
                  есть, с полями заголовка в начале.

       ~~qq         Отменяет посылаемое сообщение, помещая его
                  копию в файл _d_e_a_d._l_e_t_t_e_r в регистрационном
                  каталоге,  если   установлена   переменная
                  ssaavvee.

       ~~rr _ф_а_й_л
                  Считывает указанный _ф_а_й_л в  текст  сообще-
                  ния.

       ~~ss _с_т_р_о_к_а
                  Заносит указанную _с_т_р_о_к_у  в  поле  темы  в
                  заголовке сообщения.

       ~~tt _и_м_я ...
                  Добавляет данные _и_м_е_н_а к списку адресатов.

       ~~vv         Вызвать выбранный  редактор  (он  задается
                  переменной   VVIISSUUAALL)   для  редактирования


                            -6-                     ДЕМОС/PV


MAILX(1)               ДЕМОС. Команды               MAILX(1)


                  сообщения в том виде, как  оно  есть.  Как
                  правило,   это  будет  экранный  редактор.
                  После выхода из редактора можно продолжать
                  дозапись текста к концу письма.

       ~~ww _ф_а_й_л
                  Записывает сообщение в указанный файл.

       ~~||_к_о_м_а_н_д_а  Пропустить письмо через _к_о_м_а_н_д_у, как через
                  фильтр. Если команда ничего не выводит или
                  завершается ненормально, восстанавливается
                  исходный  текст  письма.  В качестве прос-
                  того  средства  форматирования   сообщений
                  часто используется команда ffmmtt(1).

       ~~~~_с_т_р_о_к_а   Поместить _с_т_р_о_к_у текста в сообщение,  пос-
                  тавив в начале один знак '~~'.  Если управ-
                  ляющий символ заменен, надо  будет  удваи-
                  вать  этот  символ,  чтобы  послать  его в
                  начале строки.

       Управление  переменными  осуществляется  при   помощи
       команд  sseett  и uunnsseett.  Переменная может быть логичес-
       кой, тогда нужно знать только,  установлена  она  или
       нет,  или  строкой,  при этом важно ее действительное
       значение.  В  системе  можно  использовать  следующие
       логические переменные:
       aappppeenndd
          Устанавливает, что сообщения,  посылаемые  в  файл
          _m_b_o_x,  будут  дописываться  к  концу файла, вместо
          того, чтобы переписывать весь файл, стирая  преды-
          дущие сообщения (переменная обычно устанавливается
          в файле /_u_s_r/_l_i_b/_M_a_i_l._r_c).
       aasskk
          Заставляет mmaaiillxx  спрашивать  о  теме  посылаемого
          письма.  Если  в ответ набирается только ВВКК (_к_о_н_е_ц
          _с_т_р_о_к_и),  поля  заголовка,  описывающего  тему,  в
          письме не будет.
       aasskkcccc
          В конце каждого письма спрашивать, кому  еще  пос-
          лать копии.  Ввод пустой строки означает, что дос-
          таточно существующего списка.
       aauuttoopprriinntt
          Заставляет команду ddeelleettee  работать  так  же,  как
          ddpp - так, после удаления сообщения следующее будет
          напечатано автоматически.
       iiggnnoorree
          Игнорировать сигналы прерывания с терминала  поль-
          зователя, печатая их как '@'.
       mmeettoooo
          Обычно, если отправитель письма включен  в  список
          рассылки, ему письмо не посылается. Установка этой
          переменной означает, что  отправитель  тоже  будет
          получателем.
       qquuiieett
          Отменяет печать номера версии mmaaiillxx при вызове.
       ssaavvee
          При  получении  двух  прерываний  (или  после  ~~qq)


                            -7-                     ДЕМОС/PV


MAILX(1)               ДЕМОС. Команды               MAILX(1)


          сохранить  набранное сообщение в файле _d_e_a_d._l_e_t_t_e_r
          в регистрационном каталоге данного пользователя.

       Значениями следующих переменных являются строки:

       EEDDIITTOORR  Полное  имя  текстового  редактора,   который
               вызывается командой eeddiitt или управляющей пос-
               ледовательностью  ~~ee.   Если  переменная   не
               определена     (в     ~/._m_a_i_l_r_c     или     в
               /_u_s_r/_l_i_b/_M_a_i_l._r_c),   используется    редактор
               eedd(1).

       SSHHEELLLL   Полное имя интерпретатора  командного  языка,
               вызываемого  командой !!  или управляющей пос-
               ледовательностью  ~~!!.   Если  переменная   не
               определена, вызывается sshh(1).

       VVIISSUUAALL  Полное имя текстового редактора,  вызываемого
               командой  vviissuuaall  или  управляющей последова-
               тельностью ~~vv.  Если переменная не определена
               (в ~/._m_a_i_l_r_c или в /_u_s_r/_l_i_b/_M_a_i_l._r_c), вызыва-
               ется rreedd(1).

       eessccaappee  Если переменная определена, первый  символ  -
               это  тот, который будет использоваться вместо
               ~~ для обозначения управляющих  последователь-
               ностей.

       rreeccoorrdd  Если определена, задает полное имя  файла,  в
               который  будут записаны все исходящие письма.
               Если не определена, исходящая почта не сохра-
               няется.

       ttoopplliinneess
               Если определена, задает число  строк  сообще-
               ния,  выводимых  командой ttoopp; Обычно печата-
               ются первые пять строк.

ФФААЙЙЛЛЫЫ
       /_u_s_r/_s_p_o_o_l/_m_a_i_l/*     почтовый ящик
       ~/_m_b_o_x                Ваша старая почта
       ~/._m_a_i_l_r_c             стартовый файл
       /_t_m_p/_R#               временный  файл  для  работы  с
                             редактором
       /_u_s_r/_l_i_b/_M_a_i_l.*_h_e_l_p*  описания
       /_u_s_r/_l_i_b/_M_a_i_l._r_c      системный стартовый файл
       //bbiinn//mmaaiill             программа доставки почты
       //eettcc//ddeelliivveerrmmaaiill      программа   сетевой    доставки
                             почты
       //eettcc//pprroojjmmaaiill         программа доставки почты проек-
                             там

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _f_m_t(1), _m_a_i_l(1), _p_m_c_s(1), _n_e_w_a_l_i_a_s_e_s(1),  _a_l_i_a_s_e_s(5),
       _d_e_l_i_v_e_r_m_a_i_l(8)

       Имеется отдельное описание mmaaiillxx.



                            -8-                     ДЕМОС/PV

