
SEMGET(2)         ДЕМОС. Системные вызовы          SEMGET(2)


ИИММЯЯ
       sseemmggeett - создать новую группу семафоров  или  подклю-
       читься к группе семафоров.

ФФООРРММААТТ
       #iinncclluuddee <_s_y_s/_t_y_p_e_s._h>
       #iinncclluuddee <_s_y_s/_i_p_c._h>
       #iinncclluuddee <_s_y_s/_s_e_m._h>

       _i_d = sseemmggeett( _k_e_y, _n_s_e_m_s, _f_l_a_g )
       kkeeyy__tt _k_e_y;
       iinntt _n_s_e_m_s, _f_l_a_g;

ООППИИССААННИИЕЕ
       Системный вызов sseemmggeett создает группу с ключом _k_e_y из
       _n_s_e_m_s  семафоров с номерами 0.._n_s_e_m_s-1 внутри группы.
       Максимальное  число  семафоров  в  группе  ограничено
       константой SSEEMMMMSSLL.  Этот же системный вызов выполняет
       подключение к уже существующей группе семафоров.

       Системный вызов sseemmggeett  возвращает  уникальное  целое
       число (идентификатор) _i_d, при помощи которого в даль-
       нейшем  производятся  операции  над  семафорами  этой
       группы.

       Для создания группы параметр _f_l_a_g должен иметь вид:

              _к_о_д_ы__д_о_с_т_у_п_а|IIPPCC__CCRREEAATT

       Здесь _к_о_д_ы__д_о_с_т_у_п_а - аналог кодов  доступа  к  файлам
       (смотри  cchhmmoodd((22)),,  ssttaatt((22))). В частности, существуют
       коды

       SSEEMM__RR  можно проверять (читать) значение семафора

       SSEEMM__AA  можно изменять значение семафора

       Для отказа от создания группы, если группа  с  ключом
       _k_e_y  уже  существует,  следует  использовать параметр
       _f_l_a_g вида

              _к_о_д_ы__д_о_с_т_у_п_а|IIPPCC__CCRREEAATT|IIPPCC__EEXXCCLL

       Можно указать  ключ  IIPPCC__PPRRIIVVAATTEE,  обозначающий,  что
       конкретное  значение  ключа не имеет значения; если в
       этом случае какой-либо  процесс  должен  будет  обра-
       титься к этой группе, то ему должен быть уже известен
       _i_d группы, поскольку невозможно выполнить подключение
       системным вызовом sseemmggeett с ключом IIPPCC__PPRRIIVVAATTEE.

       Системный вызов sseemmggeett позволяет также получать  дос-
       туп  к  уже существующей группе семафоров с указанным
       ключом _k_e_y (т.е. узнать ее идентификатор).  Для этого
       следует  указывать _f_l_a_g равное кодам доступа, который
       вы хотите иметь к группе:

              _к_о_д_ы__д_о_с_т_у_п_а



                            -1-                      ДЕМОС/P


SEMGET(2)         ДЕМОС. Системные вызовы          SEMGET(2)


ККООДДЫЫ ООШШИИББООКК
       При неудаче системный вызов возвращает значение -1  и
       код ошибки в переменной eerrrrnnoo:

       [[EENNOOSSPPCC]]    Группа семафоров не может  быть  создана,
                   поскольку исчерпан лимит семафоров в сис-
                   теме.

       [[EEIINNVVAALL]]    Попытка подключиться к группе  семафоров,
                   которая содержит меньше чем _n_s_e_m_s семафо-
                   ров. Чтобы не иметь проблем с такой ошиб-
                   кой, следует указывать _n_s_e_m_s равным 0.

       [[EEFFBBIIGG]]     Значение _n_s_e_m_s превышает допустимое  зна-
                   чение (при IIPPCC__CCRREEAATT),

       [[EEAACCCCEESS]]    Попытка получить доступ к уже  существую-
                   щей  группе семафоров, не имея соответст-
                   вующих прав доступа.

       [[EEEEXXIISSTT]]    Группа с ключом _k_e_y уже существует  (ука-
                   заны флаги IIPPCC__CCRREEAATT|IIPPCC__EEXXCCLL).

       [[EENNOOEENNTT]]    Попытка получить доступ к группе, которая
                   еще  не  существует.   (флаг IIPPCC__CCRREEAATT не
                   указан).

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _s_e_m_c_t_l(2), _s_e_m_o_p(2).































                            -2-                      ДЕМОС/P

