
RCSINTRO(1)            ДЕМОС. Команды            RCSINTRO(1)


ИИММЯЯ
        rrccssiinnttrroo - краткое описание команд RRCCSS.

ООППИИССААННИИЕЕ
        RRCCSS обеспечивает запись, поиск хранение версий текс-
        товых  файлов, позволяя вести учет изменений и конт-
        ролировать права доступа к файлам при  одновременной
        работе  нескольких  пользователей.  Система применя-
        ется для текстов, которые являются объектами частого
        редактирования,  например,  для  хранения  вариантов
        статей, писем, текстов программ и т.п.

        Для начала работы с системой достаточно знать  всего
        две  команды:  ccii  и  ccoo.   ccii - помещает содержимое
        текстового файла в  архивный  файл  RRCCSS,  в  котором
        накапливаются  все  версии данного текстового файла.
        ccoo - находит и выдает указанную версию из  архивного
        файла.

        ФФУУННККЦЦИИИИ ССИИССТТЕЕММЫЫ RRCCSS

        -  Хранение, поиск и выдача версий файла.  RRCCSS  сох-
           раняет все версии достаточно экономичным (с точки
           зрения использования  внешней  памяти)  способом.
           Изменения  не  приводят  к  безвозвратной  потере
           исходного файла, так как всегда остается  возмож-
           ность  восстановления предыдущей версии. Для ука-
           зания версии  можно  использовать  номер  версии,
           символьное  имя, дату создания, имя автора и ста-
           тус версии.

        -  Ведение учета всех изменений, которые  собираются
           и  заносятся автоматически. Все версии (за исклю-
           чением последней) хранятся в  терминах  редакций,
           которые  необходимо провести для получения данной
           версии из последующей.  Кроме  того,  для  каждой
           версии  указывается  автор, дата и время записи и
           краткое описание сути внесенных изменений.  Нали-
           чие  этой информации позволяет проследить историю
           развития файла, не требуя  утомительной  операции
           сравнения листингов различных версий.

        -  Решение проблем, возникающих при попытке одновре-
           менного  редактирования  одной  и  той  же версии
           файла  несколькими  пользователями.   Блокируются
           попытки   открытия  файла  для  создания  версии,
           запись которой приведет к разрушению другой  вер-
           сии.

        -  Хранение дерева версий. Система позволяет хранить
           различные  ветви  развития  файла  в виде дерева,
           отражающего  место  каждой  конкретной  версии  в
           истории развития данного файла.

        -  Слияние версий. Две разных ветви  развития  файла
           можно  слить  в одну.  При этом система проверяет
           возможное  пересечение  редакций  и,  если  такая
           ситуация    обнаружена,    сообщает    об    этом


                            -1-                     ДЕМОС/PV


RCSINTRO(1)            ДЕМОС. Команды            RCSINTRO(1)


           пользователю.

        -  Управление конфигурацией. Версии  могут  получать
           символьные имена и метки типа: экспериментальная,
           стабильная и т.д.   Это  обеспечивает  достаточно
           простой  способ описания необходимой конфигурации
           собираемых текстов.

        -  Автоматическое указание для каждой версии  имени,
           номера,  времени  создания,  автора  и  т.д.  Эта
           информация  может  заноситься  системой  в  любое
           место  файла  (указанное  пользователем)  и может
           применяться для определения номера версии и имени
           исходного файла rrccss, откуда получен данный файл.

        -  Оптимальное использование внешней  памяти.   Сис-
           тема  RRCCSS использует минимально необходимое место
           для хранения версий файлов. Практически записыва-
           ются  только отличия данной версии. При уничтоже-
           нии промежуточных версий  происходит  необходимое
           объединение соответствующих отличий.

        ННААЧЧААЛЛОО РРААББООТТЫЫ СС RRCCSS

        Предположим, имеется  файл  _f._c,  который  требуется
        передать  под  контроль  системы  RRCCSS.  В результате
        выполнения команды:

                ccii _f._c

        будет создан файл _f._c,_v, содержимое файла _f._c  пере-
        писано в _f._c,_v в качестве исходной версии 1.1, а сам
        файл _f._c - уничтожен.  Кроме  того,  при  выполнении
        команды  система  потребует  ввести краткое описание
        образованной версии. Все последующие вызовы  команды
        ccii  будут  запрашивать  краткий комментарий, который
        должен отражать суть внесенных изменений.

        Файлы с суффиксами ',_v' называются архивными файлами
        RRCCSS,  все  остальные  файлы называются рабочими фай-
        лами. Для получения рабочей версии файла _f._c из пре-
        дыдущего примера необходимо вызвать команду:

                ccoo _f._c

        Эта команда найдет последнюю версию указанного файла
        в _f._c,_v и запишет ее в файл _f._c.  Можно отредактиро-
        вать данный файл и попытаться занести новую версию в
        _f._c,_v:

                ccii _f._c

        Команда ccii добавит новую версию  _f._c,  причем  номер
        версии  будет образован из номера предыдущей версии,
        увеличенного на единицу.  Если  при  попытке  записи
        будет выдана диагностика:

                _c_i _e_r_r_o_r: _n_o _l_o_c_k _s_e_t _b_y ииммяя


                            -2-                     ДЕМОС/PV


RCSINTRO(1)            ДЕМОС. Команды            RCSINTRO(1)


        это означает, что администратор посчитал необходимым
        включить  режим блокировки при порождении новых вер-
        сий.  В этом случае при выполнении  операции  чтения
        из  файла RRCCSS необходимо сообщить системе, что пред-
        полагается создание новой версии файла  и  требуется
        запретить  попытки параллельного редактирования дан-
        ного файла до окончания работы  над  версией.   Этот
        механизм  особенно полезен при работе группы пользо-
        вателей над одним набором файлов. В данном случае  в
        команде чтения файла должен указываться признак бло-
        кировки (ключ --ll):

                ccoo --ll _f._c

        В этом режиме  гарантируется,  что  следующий  номер
        версии будет зарезервирован за пользователем, выдав-
        шим данную команду, и попытки  других  пользователей
        создать   новую   версию   файла  будут  отвергнуты.
        Существует еще одна возможность  зарезервировать  за
        собой право создания очередной версии, это команда:

                rrccss --ll _f._c

        При этом выполняются все действия по закрытию  файла
        без  порождения  рабочей  копии  _f._c.  Если в момент
        выполнения команды файл уже был  захвачен  кем-либо,
        будет  выдано  сообщение о невозможности блокировки.
        В этом случае единственное, что можно  сделать,  это
        попытаться как-нибудь договориться с соответствующим
        пользователем, не  расчитывая  на  мудрость  системы
        rrccss.

        Если пользователь является единственным и полноправ-
        ным  владельцем файла RRCCSS, необходимости в использо-
        вании аппарата блокировки нет.  В  этом  случае  его
        можно выключить с помощью команды:

                rrccss --UU _f._c

        При выключенной блокировке владельцу  нет  необходи-
        мости  указывать,  что создание рабочего файла может
        привести к появлению новой версии (хотя для  осталь-
        ных  пользователей  это действие является обязатель-
        ным).  Включение  режима  блокировки  выполняется  с
        помощью команды:

                rrccss --LL _f._c

        Наличие многочисленных файлов RRCCSS может сильно  заг-
        ромождать  рабочий  каталог.  Чтобы  избежать этого,
        часто бывает полезно собрать все файлы этого типа  в
        одном  подкаталоге.  Для  этого используется каталог
        _R_C_S, который должен располагаться  в  текущем  ката-
        логе.  При поиске файла RRCCSS система сначала просмат-
        ривает этот каталог, и только  если  соответствующий
        файл  или каталог _R_C_S отсутствует, поиск осуществля-
        ется в текущем каталоге.



                            -3-                     ДЕМОС/PV


RCSINTRO(1)            ДЕМОС. Команды            RCSINTRO(1)


        Как правило, создание новой версии связано с получе-
        нием  рабочего  файла,  его  редактирования и записи
        новой версии с помощью команды ccii,  которая  уничто-
        жает   рабочий  файл.  При  использовании  ключа  --ll
        команда:

                ccii --ll _f._c

        выполняет все свои обычные действия, за  исключением
        уничтожения  рабочего файла и снятия признака блоки-
        ровки попыток  модификации  другими  пользователями.
        Это  позволяет непосредственно продолжить редактиро-
        вание рабочего файла  после  фиксации  промежуточной
        версии.    Аналогичные   действия   выполняются  при
        использовании команды с ключем --uu, однако режим бло-
        кировки снимается.  Данный ключ часто используется в
        случае, если после записи версии предполагается пос-
        ледующая  работа с рабочим файлом (например компиля-
        ция или  распечатка).   Использование  обоих  ключей
        приводит  к  модификации  информационных  записей  в
        файле (см. ниже).

        ИИННФФООРРММААЦЦИИООННННЫЫЕЕ ЗЗААППИИССИИ

        Система RRCCSS может помещать в рабочий файл  специаль-
        ные  строки,  содержащие информацию о файле, которая
        впоследствии используется командами, выдающими спра-
        вочные сообщения.  Для указания необходимости записи
        служебной информации  в  рабочий  файл  используются
        специальные  последовательности  символов - маркеры.
        Каждый маркер определяет тип помещаемой  информации,
        а  его  положение в файле указывает место, в которое
        должна производиться запись. Так, если в файл помес-
        тить последовательность символов:

                $$HHeeaaddeerr$$

        при получении из файла RRCCSS, в рабочем  файле  данная
        последовательность будет заменена на строку вида:

                $$HHeeaaddeerr: _ф_а_й_л _в_е_р_с_и_я _д_а_т_а _в_р_е_м_я _а_в_т_о_р $$

        В процессе работы не возникает необходимости  редак-
        тирования этой строки, так как система автоматически
        проводит коррекцию при  изменении  даты  обновления,
        идентификатора  пользователя (автора), номера версии
        и т.п.  Как правило, маркеры размещаются  в  строках
        комментария.    Если   необходимо,  чтобы  служебная
        информация попала и в объектный  модуль,  достаточно
        завести  в исходном тексте программы соответствующую
        символьную константу.  Например:

                ssttaattiicc cchhaarr _r_c_s_i_d[] = "$$HHeeaaddeerr$$";

        Для  получения  справочной  информации  используется
        команда  iiddeenntt,  которая  находит  маркеры  в  файле
        любого типа и  выдает  соответствующие  строки.  Так
        могут  быть  получены  сведения  о том, какие версии


                            -4-                     ДЕМОС/PV


RCSINTRO(1)            ДЕМОС. Команды            RCSINTRO(1)


        каких файлов использовались при  создании  указанной
        программы.

        В качестве другого примера можно привести маркер:

                $$LLoogg$$

        Если указать его  в  строке  комментария  программы,
        после  него  система  поместит все краткие описания,
        которые вводились пользователем  при  создании  всех
        предыдущих  версий файла. Таким образом, в коммента-
        рии будет описана  вся  история  развития  файла  от
        исходной  версии  к  текущей.   Список  маркеров  не
        исчерпывается описанными здесь  и  полностью  приво-
        дится в разделе, посвященном команде _c_o(1).

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
        _c_i(1),   _c_o(1),    _i_d_e_n_t(1),    _m_e_r_g_e(1),    _r_c_s(1),
        _r_c_s_m_e_r_g_e(1), _r_l_o_g(1), _r_c_s_f_i_l_e(5)









































                            -5-                     ДЕМОС/PV

