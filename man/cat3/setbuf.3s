
SETBUF(3S)      ДЕМОС. Библиотечные функции       SETBUF(3S)


ИИММЯЯ
       sseettbbuuff, sseettlliinneebbuuff - указать буфер ввода/вывода.

ФФООРРММААТТ
       #iinncclluuddee <_s_t_d_i_o._h>

       sseettbbuuff(_s_t_r_e_a_m, _b_u_f)
       FFIILLEE *_s_t_r_e_a_m;
       cchhaarr *_b_u_f;

       sseettlliinneebbuuff(_s_t_r_e_a_m)
       FFIILLEE *_s_t_r_e_a_m;

ООППИИССААННИИЕЕ
       Библиотека _s_t_d_i_o поддерживает три типа обмена:  небу-
       феризированный,   блочно-буферизованный   и  строчно-
       буферизованный.  При отсутствии буферизации  обмен  с
       терминалом  (файлом)  происходит  по мере поступления
       информации.  При блочно-буферизованном обмене переда-
       ваемая  информация  накапливается  в буферной области
       памяти  (блоке),  обмен  выполняется  по   заполнению
       блока.   При  строчной  буферизации обмен выполняется
       при накоплении в буфере целой строки  (последователь-
       ность символов, оканчивающаяся кодом '\n').

       Для выполнения обмена до заполнения буфера (при буфе-
       ризации)  используется  функция  fffflluusshh.   Стандартно
       блочно-буферизованый обмен используется при работе  с
       файлами,  строчно-буферизованый - при работе с терми-
       налами.  Данные, выводимые в стандартный файл сообще-
       ний об ошибках, обычно не буферизуются.

       Функция  sseettbbuuff  должна  вызываться  после   открытия
       файла,  но  до  выполнения первой операции чтения или
       записи в него.   В  результате  этого  вызова  вместо
       автоматически  назначаемого  буфера используется сим-
       вольный массив _b_u_f.  Если в  качестве  параметра  _b_u_f
       указывается  константа  NNUULLLL, ввод/вывод не буферизу-
       ется, иначе  строчно-буферизованный  обмен  (если  он
       был) заменяется на блочно-буферизованный.

       Константа BBUUFFSSIIZZ указывает необходимый размер буфера:

              cchhaarr _b_u_f[BBUUFFSSIIZZ];

       По умолчанию буфер размером BBUUFFSSIIZZ  выделяется  функ-
       цией  mmaalllloocc  при  первом обращении к файлу с помощью
       функции ggeettcc или ppuuttcc ..

       Функция sseettlliinneebbuuff используется  для  замены  блочно-
       буферизованного  обмена на строчно-буферизованный.  В
       отличие от sseettbbuuff, вызов функции sseettlliinneebbuuff не обязан
       предшествовать первой операции чтения/записи для дан-
       ного файла.

       Для    замены    небуферизованного    или    строчно-
       буферизованного   обмена   на   блочно-буферизованный
       используется  функция   ffrreeooppeenn   (см.    _f_o_p_e_n(3s)).


                            -1-                     ДЕМОС/PV


SETBUF(3S)      ДЕМОС. Библиотечные функции       SETBUF(3S)


       Блочно-буферизованный обмен может заменяться на небу-
       феризованный с помощью функции ffrreeooppeenn и последующего
       вызова sseettbbuuff с параметром NNUULLLL:

              sseettbbuuff(_s_t_r_e_a_m, NNUULLLL)

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _f_o_p_e_n(3s), _g_e_t_c(3s), _p_u_t_c(3s), _m_a_l_l_o_c(3), _f_c_l_o_s_e(3s),
       _p_u_t_s(3s), _p_r_i_n_t_f(3s), _f_r_e_a_d(3s)



















































                            -2-                     ДЕМОС/PV

