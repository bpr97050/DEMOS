
RCS(1)                 ДЕМОС. Команды                 RCS(1)


ИИММЯЯ
        rrccss - замена атрибутов архивного файла RRCCSS.

ФФООРРММААТТ
        rrccss [_к_л_ю_ч_и] _ф_а_й_л...

ООППИИССААННИИЕЕ
        Команда rrccss используется для создания новых архивных
        файлов RRCCSS или замены атрибутов существующих файлов.
        Каждый архивный файл RRCCSS  содержит:  версии  какого-
        либо  текстового  файла, список доступа, сообщения о
        изменениях,  комментарии  и  набор  атрибутов.   Для
        использования  команды  rrccss,  необходимо  включить в
        список доступа соответствующего файла  регистрацион-
        ное  имя пользователя.  Контроль доступа не произво-
        дится в случаях, если: задан ключ --ii; список доступа
        пуст;   пользователь  является  хозяином  файла  или
        суперпользователем.

        Каждое имя, оканчивающееся на  `,_v'  рассматривается
        как  имя  архивного  файла  RRCCSS, предполагается, что
        файлы с другими  именами  являются  рабочими.   Если
        задано  только имя рабочего файла, команда rrccss пыта-
        ется  найти  соответствующий  архивный   файл   (см.
        _c_o(1)).

        При вызове команды могут задаваться следующие ключи:

        --ii         Создать и инициализировать пустой  архив-
                   ный  файл.   Если  не  задано  полное имя
                   архивного файла, система пытается размес-
                   тить  его  в  каталоге  ./_R_C_S  и, если он
                   отсутствует  файл  создается  в   текущем
                   каталоге.   Если  указанный архивный файл
                   уже  существует,  выдается  сообщение  об
                   ошибке.

        --aa_п_о_л_ь_з    Добавить указанные идентификаторы пользо-
                   вателей  (_п_о_л_ь_з)  в список доступа архив-
                   ного файла (_ф_а_й_л). В качестве разделителя
                   в строке _п_о_л_ь_з используется запятая.

        --AA_с_т_а_р_ы_й__ф_а_й_л
                   Добавить   список   доступа   из    файла
                   _с_т_а_р_ы_й__ф_а_й_л  в  список  доступа архивного
                   файла (_ф_а_й_л).

        --ee[_п_о_л_ь_з]  Исключить имена пользователей  из  списка
                   доступа заданного архивного файла (_ф_а_й_л).
                   Имена  перечисляются  через   запятую   в
                   списке  _п_о_л_ь_з.   Если имена пользователей
                   не указаны, из списка доступа исключаются
                   все имена.

        --cc_с_т_р_о_к_а   Записать заголовок комментария,  заданный
                   строкой _с_т_р_о_к_а.  Заголовок выдается перед
                   каждой комментарной строкой подставляемой
                   при расширении ключевого параметра $$LLoogg$$.


                            -1-                     ДЕМОС/PV


RCS(1)                 ДЕМОС. Команды                 RCS(1)


                   Этот режим, в основном, используется  при
                   работе с языками высокого уровня не имею-
                   щими  многострочных  комментариев.    При
                   инициализации  нового  файла  или  записи
                   очередной версии  заголовок  определяется
                   по суффиксу имени рабочего файла.  Напри-
                   мер, пусть имеется текст фортранной прог-
                   раммы,  записанный  в  файл _l_l._f.  Тогда,
                   если  заголовок  не  переопределялся,   в
                   начале  каждой комментарной строки файла,
                   подставляемой при расширении $$LLoogg$$, будет
                   записываться символ `cc'.

        --ll[_r_e_v]    Зарезервировать версию _r_e_v.   Если  задан
                   номер  ветви,  блокируется старшая версия
                   этой ветви.  Если номер версии  (_r_e_v)  не
                   указан,   резервируется   старшая  версия
                   основного ствола.   Режим  резервирования
                   позволяет  блокировать попытки параллель-
                   ной модификации одной и  той  же  версии.
                   Снять  установленную  блокировку  можно с
                   помощью команды rrccss --uu.

        --uu[_r_e_v]    Снять  блокировку  с  версии  номер  _r_e_v.
                   Если  вместо  номера  версии указан номер
                   ветви, снимается блокировка с самой стар-
                   шей версии данной ветви.  Если номер вер-
                   сии  (_r_e_v)  не  указан,   подразумевается
                   старшая  версия основного ствола.  Счита-
                   ется, что только пользователь  зарезерви-
                   ровавший  версию, имеет право снять с нее
                   блокировку.  Тем не менее, такая  возмож-
                   ность существует.  Так, при попытке разб-
                   локировать версию зарезервированную  дру-
                   гим  пользователем,  запрашивается  подт-
                   верждение и система требует ввести  крат-
                   кое  объяснение причин снятия блокировки.
                   Текст пояснения может  состоять  из  нес-
                   кольких  строк и должен завершаться стро-
                   кой содержащей одиночный символ  `..'  или
                   код   CCTTRRLL//DD.    После   выполнения  этой
                   работы, блокировка снимается, а пользова-
                   телю ранее зарезервировавшему версию сис-
                   тема посылает  письмо  с  уведомлением  о
                   случившемся и объяснениями виновника.

        --LL         Включить механизм блокировки. При  работе
                   в  данном  режиме  владелец  файла RRCCSS не
                   освобождается от  обязанности  резервиро-
                   вать  версию  для  последующей  записи ее
                   модификаций.  Этот режим необходим,  если
                   развитием   файла   занимается  несколько
                   пользователей.

        --UU         Выключить механизм блокировки.  В  данном
                   режиме  владелец  файла  может записывать
                   новые версии без предварительного  резер-
                   вирования   файла.   Предполагается,  что


                            -2-                     ДЕМОС/PV


RCS(1)                 ДЕМОС. Команды                 RCS(1)


                   только  хозяин  может  изменять  архивный
                   файл.   Выбор  стандартного режима работы
                   (--LL или --UU) выполняет администратор  сис-
                   темы.

        --nn_n_a_m_e[:_r_e_v]
                   Присваивает символьное имя _n_a_m_e заносимой
                   версии.   Если  такое имя уже существует,
                   выдается сообщение об  ошибке.   Ключ  --nn
                   при  отсутствии номера версии (_r_e_v) унич-
                   тожает указанное имя.

        --NN_n_a_m_e[:_r_e_v]
                   Выполняет действия, аналогичные ключу --nn,
                   но  если  данной  имя уже существует, оно
                   переприсваивается указанной версии.

        --oo_r_a_n_g_e    Уничтожает в архивном файле версии, пере-
                   численные  в строке _r_a_n_g_e.  В _r_a_n_g_e может
                   указываться либо номер одной версии, либо
                   несколько   подряд  идущих  версий  одной
                   ветви. В последнем случае, первая и  пос-
                   ледняя  исключаемые  версии разделяются с
                   помощью  знака  минус  (_r_e_v_1--_r_e_v_2).  Если
                   задан  только  номер  ветви, подразумева-
                   ется, что иключается старшая версия  дан-
                   ной  ветви.   При указании номера версии,
                   начинающиегося со знака минус --_r_e_v,  иск-
                   лючаются  все младшие версии ветви вплоть
                   до _r_e_v  включительно.   Конструкция  _r_e_v--
                   используется  для  исключения всех версий
                   ветви от _r_e_v вплоть до самой старшей вер-
                   сии.  Если хотя бы одна из указанных вер-
                   сий зарезервирована или имеет ветви, опе-
                   рация не выполняется.

        --qq         Неинтерактивный  режим.   Диагностические
                   сообщения не выдаются.

        --ss_s_t_a_t_e[:_r_e_v]
                   Присвоить статус _s_t_a_t_e версии _r_e_v.   Каж-
                   дой  версии система присваивает специаль-
                   ную метку, отражающую степень  ее  готов-
                   ности  (статус).  Строго говоря, статус -
                   это  произвольный  идентификатор,  однако
                   существует  соглашение  по которому можно
                   присваивать  только  строго  определенные
                   последовательности   символов,  это:  EExxpp
                   (экспериментальная), SSttaabb (стабильная)  и
                   RReell  (выходная).   Если  номер  версии не
                   указан, статус приваивается старшей  вер-
                   сии  основного ствола. При задании только
                   номера ветви,  действия  выполняются  над
                   старшей версией данной ветви.

                   По умолчанию все версии  получают  статус
                   EExxpp.



                            -3-                     ДЕМОС/PV


RCS(1)                 ДЕМОС. Команды                 RCS(1)


        --tt[_t_x_t_f_i_l_e]
                   Записать пояснительный текст  в  архивный
                   файл  (ранее  существовавший  комментарий
                   уничтожается).  Если имя файла с  текстом
                   (_t_x_t_f_i_l_e)   не  указано,  система  выдает
                   приглашение на ввод комментария с  терми-
                   нала  пользователя.  Вводимый текст может
                   состоять из  нескольких  строк  и  должен
                   завершаться  строкой содержащей одиночный
                   символ `..' или  код  CCTTRRLL//DD.   Если  файл
                   _t_x_t_f_i_l_e  задан, пояснительный текст копи-
                   руется из него.  При инициализации архив-
                   ного  файла  ввод  пояснительного  текста
                   производиться в любом случае, вне зависи-
                   мости  от  того, был ли задан ключ --tt или
                   нет.  Запрос на ввод текста не  выдается,
                   если стандартный файл ввода читается не с
                   терминала.

ДДИИААГГННООССТТИИККАА
        При работе команды в стандартный файл  вывода  диаг-
        ностик  передаются  имена  обрабатываемых архивных и
        рабочих файлов.

        Код возврата всегда относится к последней обработан-
        ной  версии:  0  -  операция  прошла  успешно, 1 - в
        остальных случаях.

РРЕЕЖЖИИММЫЫ ДДООССТТУУППАА КК ФФААЙЙЛЛААММ
        Пользователь, должен иметь право  записи  в  каталог
        содержащий  архивный  файл  и  право  чтения  самого
        архивного файла RRCCSS.

        В процессе работы команды создаются  несколько  вре-
        менных  файлов.  В частности, в каталоге, содержащем
        архивный файл,  создается  специальный  файл-семафор
        для  блокировки  попыток одновременного редактирова-
        ния.  При обновлении архивного файла система  выпол-
        няет  все  действия  над его копией, и, только после
        получения нового  варианта,  присваивает  ему  соот-
        ветствующие  имя.   Такая  стратегия  работы  делает
        попытки связывания архивного файла бесполезными.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
        _c_o(1),  _c_i(1),  _i_d_e_n_t(1),  _r_c_s_d_i_f_f(1),  _r_c_s_i_n_t_r_o(1),
        _r_c_s_m_e_r_g_e(1), _r_l_o_g(1), _r_c_s_f_i_l_e(5)














                            -4-                     ДЕМОС/PV

